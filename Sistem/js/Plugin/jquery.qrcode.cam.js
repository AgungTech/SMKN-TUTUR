/*!
 * jQuery Plugin WebCodeCam-1.0.0
 * Author: Tóth András
 * Web: http://atandrastoth.co.uk
 * email: atandrastoth@gmail.com
 * Licensed under the MIT license
 */
/*
Included:
barcode decoder (DecoderWorker.js) -> https://github.com/EddieLa/BarcodeReader/blob/master/src/DecoderWorker.js
qr-decoder (qrcodelib.js) -> https://github.com/LazarSoft/jsqrcode
*/
(function(n,C,H,I){function D(b,a){this.element=b;t=n(b);this.options=n.extend({},E,a);this._defaults=E;this._name="WebCodeCam";this.init()&&(this.setEventListeners(),(this.options.ReadQRCode||this.options.ReadBarecode)&&this.setCallback())}var a,u,k,t,h,g,l={},e=n('<video style="position:absolute;visibility:hidden;display: none;">')[0],v=!1,F=!1,
	G=new Worker("data:text/plain;base64,LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KSmF2YXNjcmlwdCBPbmx5IEJhcmNvZGVfUmVhZGVyIFYxLjUgYnkgRWRkaWUgTGFyc3NvbiA8aHR0cHM6Ly9naXRodWIuY29tL0VkZGllTGEvQmFyY29kZVJlYWRlcj4KClRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLCBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlULgpBbGwgdXNlIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBpbmNsdWRlIHRoaXMKdGV4dCwgaW5jbHVkaW5nIHRoZSByZWZlcmVuY2UgdG8gdGhlIGNyZWF0b3Igb2YgdGhlIG9yaWdpbmFsIHNvdXJjZSBjb2RlLiBUaGUKb3JpZ2luYXRvciBhY2NlcHRzIG5vIHJlc3BvbnNpYmlsaXR5IG9mIGFueSBraW5kIHBlcnRhaW5pbmcgdG8KdXNlIG9mIHRoaXMgc29mdHdhcmUuCgpDb3B5cmlnaHQgKGMpIDIwMTMgRWRkaWUgTGFyc3NvbgoKUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weQpvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAppbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzCnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwKY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CgpUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgphbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KClRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLApGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgpMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLApPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOClRIRSBTT0ZUV0FSRS4KCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKZnVuY3Rpb24gQ3JvcFRhYmxlKHgseSx3LGgpewoJaWYody14PEltYWdlLndpZHRoJiZ3LXg+MCkgSW1hZ2UudGFibGUgPSBJbWFnZS50YWJsZS5zbGljZSh4LHcpOwoJaWYoaC15PEltYWdlLmhlaWdodCYmaC15PjApIHsKCQlmb3IodmFyIGk9MDtpPEltYWdlLnRhYmxlLmxlbmd0aDtpKyspewoJCQlJbWFnZS50YWJsZVtpXSA9IEltYWdlLnRhYmxlW2ldLnNsaWNlKHksaCk7CgkJfTsKCX07CglpZihJbWFnZS53aWR0aCE9PUltYWdlLnRhYmxlLmxlbmd0aHx8SW1hZ2UuaGVpZ2h0IT09SW1hZ2UudGFibGVbMF0ubGVuZ3RoKSB7CgkJSW1hZ2Uud2lkdGggPSBJbWFnZS50YWJsZS5sZW5ndGg7CgkJSW1hZ2UuaGVpZ2h0ID0gSW1hZ2UudGFibGVbMF0ubGVuZ3RoOwoJCUNyZWF0ZUltYWdlRGF0YSgpOwoJfQp9OwoKZnVuY3Rpb24gTG9nKG1lc3NhZ2UpIHsKCXBvc3RNZXNzYWdlKHtyZXN1bHQ6IG1lc3NhZ2UsIHN1Y2Nlc3M6ICJsb2cifSk7Cn0KCmZ1bmN0aW9uIGZsaXBUYWJsZSgpIHsKCWZvcih2YXIgaSA9IDA7IGkgPCBJbWFnZS50YWJsZS5sZW5ndGg7IGkrKykgewoJCUltYWdlLnRhYmxlW2ldLnJldmVyc2UoKTsKCX0KCUltYWdlLnRhYmxlLnJldmVyc2UoKTsKCUNyZWF0ZUltYWdlRGF0YSgpOwp9CgpmdW5jdGlvbiByb3RhdGVUYWJsZVJpZ2h0KCkgewoJdmFyIHRlbXBUYWJsZSA9IFtdOwoJdmFyIHRlbXBBcnJheT1bXQoJZm9yKHZhciBpPUltYWdlLnRhYmxlWzBdLmxlbmd0aC0xO2k+PTA7aS0tKXsKCQl0ZW1wQXJyYXk9W107CgkJZm9yKHZhciBqPTA7ajxJbWFnZS50YWJsZS5sZW5ndGg7aisrKXsKCQkJdGVtcEFycmF5LnB1c2goSW1hZ2UudGFibGVbal1baV0pOwoJCX07CgkJdGVtcFRhYmxlLnB1c2godGVtcEFycmF5KTsKCX07CglJbWFnZS50YWJsZSA9IHRlbXBUYWJsZTsKCUltYWdlLndpZHRoID0gSW1hZ2UudGFibGUubGVuZ3RoOwoJSW1hZ2UuaGVpZ2h0ID0gSW1hZ2UudGFibGVbMF0ubGVuZ3RoOwoJQ3JlYXRlSW1hZ2VEYXRhKCk7Cn0KCmZ1bmN0aW9uIHJvdGF0ZVRhYmxlTGVmdCgpIHsKCXZhciB0ZW1wVGFibGUgPSBbXTsKCXZhciB0ZW1wQXJyYXk9W10KCWZvcih2YXIgaT0wO2kgPCBJbWFnZS50YWJsZVswXS5sZW5ndGg7aSsrKXsKCQl0ZW1wQXJyYXk9W107CgkJZm9yKHZhciBqPUltYWdlLnRhYmxlLmxlbmd0aC0xO2o+PTA7ai0tKXsKCQkJdGVtcEFycmF5LnB1c2goSW1hZ2UudGFibGVbal1baV0pOwoJCX07CgkJdGVtcFRhYmxlLnB1c2godGVtcEFycmF5KTsKCX07CglJbWFnZS50YWJsZSA9IHRlbXBUYWJsZTsKCUltYWdlLndpZHRoID0gSW1hZ2UudGFibGUubGVuZ3RoOwoJSW1hZ2UuaGVpZ2h0ID0gSW1hZ2UudGFibGVbMF0ubGVuZ3RoOwoJQ3JlYXRlSW1hZ2VEYXRhKCk7Cn0KCmZ1bmN0aW9uIFJlbW92ZURpc3QoKXsKCXZhciBEaXN0YW5jZT0wOwoJdmFyIENvdW50PTA7Cgl2YXIgRGlzdGFuY2VIb2xkZXI9W107Cgl2YXIgRGVjbGluZVZhbHVlOwoJZm9yKHZhciB5PTA7eTxJbWFnZS5oZWlnaHQ7eSsrKXsKCQlEaXN0YW5jZT0wOwoJCUNvdW50PTA7CgkJZm9yKHZhciB4PTA7eDxJbWFnZS53aWR0aDt4KyspewoJCQlpZigoSW1hZ2UudGFibGVbeF1beV1bMF0rSW1hZ2UudGFibGVbeF1beV1bMV0rSW1hZ2UudGFibGVbeF1beV1bMl0pLzM8MTAwKXsKCQkJCWRvewoJCQkJCUNvdW50Kys7CgkJCQkJeCsrCgkJCQkJaWYoeD49SW1hZ2Uud2lkdGgpewoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9d2hpbGUoKEltYWdlLnRhYmxlW3hdW3ldWzBdK0ltYWdlLnRhYmxlW3hdW3ldWzFdK0ltYWdlLnRhYmxlW3hdW3ldWzJdKS8zPDEwMCkKCQkJCWlmKHg8SW1hZ2Uud2lkdGgpewoJCQkJCURlY2xpbmVWYWx1ZT0oSW1hZ2UudGFibGVbeF1beV1bMF0rSW1hZ2UudGFibGVbeF1beV1bMV0rSW1hZ2UudGFibGVbeF1beV1bMl0pLzMKCQkJCQlkb3sKCQkJCQkJRGlzdGFuY2UrKzsKCQkJCQkJeCsrCgkJCQkJCWlmKHg+PUltYWdlLndpZHRoKXsKCQkJCQkJCURpc3RhbmNlPTA7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCX13aGlsZSgoSW1hZ2UudGFibGVbeF1beV1bMF0rSW1hZ2UudGFibGVbeF1beV1bMV0rSW1hZ2UudGFibGVbeF1beV1bMl0pLzM+RGVjbGluZVZhbHVlKQoJCQkJfQoJCQkJaWYoRGlzdGFuY2U+Q291bnQqNCl7CgkJCQkJRGlzdGFuY2VIb2xkZXIucHVzaCh4KTsKCQkJCX1lbHNlewoJCQkJCURpc3RhbmNlSG9sZGVyLnB1c2goMCk7CgkJCQl9CgkJCQl4PUltYWdlLndpZHRoOwoJCQl9CgkJfQoJfQoJQ291bnQ9MDsKCWZvcih2YXIgaT0wO2k8RGlzdGFuY2VIb2xkZXIubGVuZ3RoO2krKyl7CgkJQ291bnQrPURpc3RhbmNlSG9sZGVyW2ldOwoJfQoJQ291bnQvPURpc3RhbmNlSG9sZGVyLmxlbmd0aDsKCWlmKENvdW50PjIwKSBDcm9wVGFibGUoTWF0aC5mbG9vcihDb3VudCksMCxJbWFnZS53aWR0aCxJbWFnZS5oZWlnaHQpOwp9CgpmdW5jdGlvbiB2ZXJ0aWNhbEFyZWFzKCkgewoJZGF0YUNvcHkgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoSW1hZ2UuZGF0YSk7CglpZihMb3dMaWdodCkgewoJCWNvbnRyYXN0QmluYXJ5KGRhdGFDb3B5KTsKCX0gZWxzZSB7CgkJY29udHJhc3QoZGF0YUNvcHksMjUwKTsKCQliaW5hcnkoZGF0YUNvcHksMTAwKTsKCX0KCXZhciBtYWluU3RhcnQgPSBJbWFnZS53aWR0aCo0KihNYXRoLnJvdW5kKEltYWdlLmhlaWdodC8yKSk7Cgl2YXIgY29yZEFycmF5ID0gW107Cgl2YXIgc3RhcnQ7Cgl2YXIgY291bnRlcjsKCWZvcih2YXIgaSA9IG1haW5TdGFydDsgaSA8IG1haW5TdGFydCtJbWFnZS53aWR0aCo0O2krPTQpIHsKCQlpZihkYXRhQ29weVtpXSA9PT0gMCkgewoJCQlzdGFydCA9IGk7CgkJCWJyZWFrOwoJCX0KCX0KCXZhciB0ZW1wQ29yZDsKCXZhciB3YXNXaGl0ZSA9IGZhbHNlOwoJdmFyIHRlbXBTdGFydCA9IHN0YXJ0OwoJZm9yKHZhciBpID0gc3RhcnQ7IGkgPCBtYWluU3RhcnQrSW1hZ2Uud2lkdGgqNDtpKz00KSB7CgkJaWYoZGF0YUNvcHlbaV0gPT09IDI1NSkgewoJCQljb3VudGVyKys7CgkJCWlmKHdhc1doaXRlID09IGZhbHNlKSB7CgkJCQl0ZW1wQ29yZCA9IGk7CgkJCQl3YXNXaGl0ZSA9IHRydWU7CgkJCX0KCQkJaWYoY291bnRlciA+IDMwKSB7CgkJCQlpZih0ZW1wU3RhcnQtbWFpblN0YXJ0ID4gNDApIHsKCQkJCQl0ZW1wU3RhcnQgLT0gNDA7CgkJCQl9CgkJCQljb3JkQXJyYXkucHVzaChbKHRlbXBTdGFydC1tYWluU3RhcnQpLzQsKHRlbXBDb3JkLW1haW5TdGFydCkvNF0pCgkJCQl3aGlsZShkYXRhQ29weVtpXSA9PT0gMjU1ICYmIGkgPCBtYWluU3RhcnQrSW1hZ2Uud2lkdGgqNCkgewoJCQkJCWkrPTQ7CgkJCQl9CgkJCQl0ZW1wU3RhcnQgPSBpOwoJCQl9CgkJfWVsc2UgewoJCQljb3VudGVyID0gMDsKCQkJd2FzV2hpdGUgPSBmYWxzZTsKCQl9Cgl9CglyZXR1cm4gY29yZEFycmF5Owp9CgpmdW5jdGlvbiBJbnRlcmVzdEFyZWFzKHN0ZXAsc3RhcnQpewoJZGF0YUNvcHkgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoSW1hZ2UuZGF0YSk7CglpZihMb3dMaWdodCkgewoJCWNvbnRyYXN0QmluYXJ5KGRhdGFDb3B5KTsKCX0gZWxzZSB7CgkJY29udHJhc3QoZGF0YUNvcHksMjUwKTsKCQliaW5hcnkoZGF0YUNvcHksMTAwKTsKCX0KCXZhciBMb29wRXhpdD0xMDsKCXZhciBwZXJjZW50YWdlPTYuMDsKCXZhciBjb3Jkc1k9MDsKCXZhciBwcmV2aW91cz0tMTsKCWRvewoJCWRvewoJCQljb3Jkc1k9SG9yaXpvbnRhbEFyZWEoZGF0YUNvcHksY29yZHNZLHBlcmNlbnRhZ2UpCgkJCUxvb3BFeGl0LS0KCQl9d2hpbGUoKHR5cGVvZiBjb3Jkc1kpPT0odHlwZW9mIDUpJiZMb29wRXhpdCk7CgkJaWYoY29yZHNZWzFdLWNvcmRzWVswXTwyNSl7CgkJCWlmKHBlcmNlbnRhZ2U+MS4wKXsKCQkJCWNvcmRzWT1jb3Jkc1lbMV07CgkJCQlwZXJjZW50YWdlLT0wLjU7CgkJCQlMb29wRXhpdD0xMDsKCQkJfQoJCX1lbHNlewoJCQlpZihwZXJjZW50YWdlPjEuMCl7CgkJCQlpZihwcmV2aW91cyE9PWNvcmRzWVswXSl7CgkJCQkJcHJldmlvdXM9Y29yZHNZWzBdOwoJCQkJCWlmKHR5cGVvZiBjb3Jkc1kgIT09IHR5cGVvZiA1KSBhbGxBcmVhcy5wdXNoKGNvcmRzWSk7CgkJCQkJY29yZHNZPWNvcmRzWVsxXTsKCQkJCQlwZXJjZW50YWdlLT0wLjU7CgkJCQkJTG9vcEV4aXQ9MTA7CgkJCQl9ZWxzZXsKCQkJCQljb3Jkc1k9MDsKCQkJCQlwZXJjZW50YWdlLT0wLjU7CgkJCQkJTG9vcEV4aXQ9MTA7CgkJCQl9CgkJCX1lbHNlewoJCQkJYnJlYWs7CgkJCX0KCQl9Cgl9d2hpbGUodHlwZW9mIGNvcmRzWSA9PT0gdHlwZW9mIDUpCn0KCmZ1bmN0aW9uIENyZWF0ZUltYWdlRGF0YSgpewoJSW1hZ2UuZGF0YSA9IG5ldyBVaW50OENsYW1wZWRBcnJheShJbWFnZS53aWR0aCpJbWFnZS5oZWlnaHQqNCk7Cgl2YXIgQ29udmVydGVyOwoJZm9yKHZhciB5PTA7eTxJbWFnZS5oZWlnaHQ7eSsrKXsKCQlmb3IodmFyIHg9MDt4PEltYWdlLndpZHRoO3grKyl7CgkJCUNvbnZlcnRlciA9IHkqNCpJbWFnZS53aWR0aDsKCQkJSW1hZ2UuZGF0YVtDb252ZXJ0ZXIreCo0XSA9IEltYWdlLnRhYmxlW3hdW3ldWzBdOwoJCQlJbWFnZS5kYXRhW0NvbnZlcnRlcit4KjQrMV0gPSBJbWFnZS50YWJsZVt4XVt5XVsxXTsKCQkJSW1hZ2UuZGF0YVtDb252ZXJ0ZXIreCo0KzJdID0gSW1hZ2UudGFibGVbeF1beV1bMl07CgkJCUltYWdlLmRhdGFbQ29udmVydGVyK3gqNCszXSA9IEltYWdlLnRhYmxlW3hdW3ldWzNdOwoJCX07Cgl9Owp9OwoKZnVuY3Rpb24gQmxhY2tFZGdlcyh0aHJlc2hvbGQpewoJdmFyIGF2cmc9MDsKCXZhciB3aGl0ZUFycmF5PVtdOwoJZm9yKHZhciBpPTA7aTxJbWFnZS5oZWlnaHQ7aSsrKXsKCQl3aGl0ZUFycmF5LnB1c2goWzI1NSwyNTUsMjU1LDI1NV0pOwoJfQoJZm9yKHZhciB4PTA7eDxJbWFnZS53aWR0aDt4KyspewoJCWF2cmc9MDsKCQlmb3IodmFyIHk9MDt5PEltYWdlLmhlaWdodDt5KyspewoJCQlhdnJnKz0oSW1hZ2UudGFibGVbeF1beV1bMF0rSW1hZ2UudGFibGVbeF1beV1bMV0rSW1hZ2UudGFibGVbeF1beV1bMl0pLzMKCQl9CgkJYXZyZy89SW1hZ2UuaGVpZ2h0OwoJCWlmKGF2cmc8dGhyZXNob2xkKXsKCQkJSW1hZ2UudGFibGVbeF09d2hpdGVBcnJheS5zbGljZSgpOwoJCX1lbHNlewoJCQlJbWFnZS50YWJsZVt4XT13aGl0ZUFycmF5LnNsaWNlKCk7CgkJCUltYWdlLnRhYmxlW3grMV09d2hpdGVBcnJheS5zbGljZSgpCgkJCWJyZWFrOwoJCX0KCX07Cglmb3IodmFyIHg9SW1hZ2Uud2lkdGgtMTt4Pj0wO3gtLSl7CgkJYXZyZz0wOwoJCWZvcih2YXIgeT0wO3k8SW1hZ2UuaGVpZ2h0O3krKyl7CgkJCWF2cmcrPShJbWFnZS50YWJsZVt4XVt5XVswXStJbWFnZS50YWJsZVt4XVt5XVsxXStJbWFnZS50YWJsZVt4XVt5XVsyXSkvMwoJCX0KCQlhdnJnLz1JbWFnZS5oZWlnaHQ7CgkJaWYoYXZyZzx0aHJlc2hvbGQpewoJCQlJbWFnZS50YWJsZVt4XT13aGl0ZUFycmF5LnNsaWNlKCk7CgkJfWVsc2V7CgkJCWJyZWFrOwoJCX0KCX07CglDcmVhdGVJbWFnZURhdGEoKTsKfQoKZnVuY3Rpb24gQ3JlYXRlVGFibGUoKSB7CglJbWFnZS50YWJsZSA9IFtdOwoJdmFyIHRlbXBBcnJheT1bXQoJZm9yKHZhciBpPTA7aTxJbWFnZS53aWR0aCo0O2krPTQpewoJCXRlbXBBcnJheT1bXTsKCQlmb3IodmFyIGo9aTtqPEltYWdlLmRhdGEubGVuZ3RoO2orPUltYWdlLndpZHRoKjQpewoJCQl0ZW1wQXJyYXkucHVzaChbSW1hZ2UuZGF0YVtqXSxJbWFnZS5kYXRhW2orMV0sSW1hZ2UuZGF0YVtqKzJdLEltYWdlLmRhdGFbaiszXV0pOwoJCX07CgkJSW1hZ2UudGFibGUucHVzaCh0ZW1wQXJyYXkpOwoJfTsKfTsKCmZ1bmN0aW9uIEVubGFyZ2VUYWJsZShoLHcpewoJdmFyIFRlbXBBcnJheSA9IFtdOwoJZm9yKHZhciB4PTA7eDxJbWFnZS53aWR0aDt4KyspewoJCVRlbXBBcnJheSA9IFtdOwoJCWZvcih2YXIgeT0wO3k8SW1hZ2UuaGVpZ2h0O3krKyl7CgkJCWZvcih2YXIgaT0wO2k8aDtpKyspewoJCQkJVGVtcEFycmF5LnB1c2goSW1hZ2UudGFibGVbeF1beV0pOwoJCQl9CgkJfQoJCUltYWdlLnRhYmxlW3hdPVRlbXBBcnJheS5zbGljZSgpOwoJfQoJVGVtcEFycmF5PUltYWdlLnRhYmxlLnNsaWNlKCk7Cglmb3IodmFyIHg9MDt4PEltYWdlLndpZHRoO3grKyl7CgkJZm9yKHZhciBpPTA7aTx3O2krKyl7CgkJCUltYWdlLnRhYmxlW3gqdytpXT1UZW1wQXJyYXlbeF0uc2xpY2UoKTsKCQl9Cgl9CglJbWFnZS53aWR0aCA9IEltYWdlLnRhYmxlLmxlbmd0aDsKCUltYWdlLmhlaWdodCA9IEltYWdlLnRhYmxlWzBdLmxlbmd0aDsKCUNyZWF0ZUltYWdlRGF0YSgpOwp9CgkJCQpmdW5jdGlvbiBTY2FsZUhlaWdodChzY2FsZSkgewoJdmFyIHRlbXBBcnJheT1bXQoJdmFyIGF2cmdSZWQ9MDsKCXZhciBhdnJnR3JlZW49MDsKCXZhciBhdnJnQmx1ZT0wOwoJZm9yKHZhciBpPTA7aTxJbWFnZS5oZWlnaHQtc2NhbGU7aSs9c2NhbGUpewoJCWZvcih2YXIgaj0wO2o8SW1hZ2Uud2lkdGg7aisrKXsKCQkJYXZyZ1JlZD0wOwoJCQlhdnJnR3JlZW49MDsKCQkJYXZyZ0JsdWU9MDsKCQkJZm9yKHZhciBrPWk7azxpK3NjYWxlO2srKyl7CgkJCQlhdnJnUmVkKz1JbWFnZS50YWJsZVtqXVtrXVswXQoJCQkJYXZyZ0dyZWVuKz1JbWFnZS50YWJsZVtqXVtrXVsxXQoJCQkJYXZyZ0JsdWUrPUltYWdlLnRhYmxlW2pdW2tdWzJdOwoJCQl9CgkJCXRlbXBBcnJheS5wdXNoKGF2cmdSZWQvc2NhbGUpOwoJCQl0ZW1wQXJyYXkucHVzaChhdnJnR3JlZW4vc2NhbGUpOwoJCQl0ZW1wQXJyYXkucHVzaChhdnJnQmx1ZS9zY2FsZSk7CgkJCXRlbXBBcnJheS5wdXNoKDI1NSk7CgkJfQoJfQoJcmV0dXJuIG5ldyBVaW50OENsYW1wZWRBcnJheSh0ZW1wQXJyYXkpOwp9CgpmdW5jdGlvbiBJbWdQcm9jZXNzaW5nKCkgewoJdmFyIGRhdGFDb3B5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KEltYWdlLmRhdGEpOwoJaWYoTG93TGlnaHQpIHsKCQljb250cmFzdEJpbmFyeShkYXRhQ29weSk7Cgl9IGVsc2UgewoJCWNvbnRyYXN0KGRhdGFDb3B5LDI1NSk7CgkJYmluYXJ5KGRhdGFDb3B5LDExMCk7Cgl9Cgl2YXIgQmxhY2tFZGdlPVRyaW1CbGFjayhkYXRhQ29weSkKCUNyb3BUYWJsZShCbGFja0VkZ2VbMF0sMCxCbGFja0VkZ2VbMV0sSW1hZ2UuaGVpZ2h0KQoJYWxsQXJlYXM9W10KCXZhciBjb29yZEhvbGRlcjsKCXZhciB0ZW1wVGFibGU9SW1hZ2UudGFibGUuc2xpY2UoKTsKCUludGVyZXN0QXJlYXMoKTsKCWlmKGFsbEFyZWFzLmxlbmd0aD09PTApewoJCWFsbEFyZWFzLnB1c2goYXZlcmFnZUxpbmVzKCkpOwoJfQoJaWYoSW1hZ2UuaGVpZ2h0LWFsbEFyZWFzW2FsbEFyZWFzLmxlbmd0aC0xXVsxXT4zMCl7CgkJQ3JvcFRhYmxlKDAsYWxsQXJlYXNbYWxsQXJlYXMubGVuZ3RoLTFdWzFdLEltYWdlLndpZHRoLEltYWdlLmhlaWdodCkKCQlJbWFnZS53aWR0aCA9IEltYWdlLnRhYmxlLmxlbmd0aDsKCQlJbWFnZS5oZWlnaHQgPSBJbWFnZS50YWJsZVswXS5sZW5ndGg7CgkJQ3JlYXRlSW1hZ2VEYXRhKCk7CgkJSW50ZXJlc3RBcmVhcygpCgkJSW1hZ2UudGFibGU9dGVtcFRhYmxlLnNsaWNlKCk7CgkJSW1hZ2Uud2lkdGggPSBJbWFnZS50YWJsZS5sZW5ndGg7CgkJSW1hZ2UuaGVpZ2h0ID0gSW1hZ2UudGFibGVbMF0ubGVuZ3RoOwoJCUNyZWF0ZUltYWdlRGF0YSgpOwoJfTsKCXZhciBhbGxUYWJsZXM9W107CglJbWFnZS50YWJsZT10ZW1wVGFibGUuc2xpY2UoKTsKCUltYWdlLndpZHRoID0gSW1hZ2UudGFibGUubGVuZ3RoOwoJSW1hZ2UuaGVpZ2h0ID0gSW1hZ2UudGFibGVbMF0ubGVuZ3RoOwoJZm9yKHZhciBpPTA7aTxhbGxBcmVhcy5sZW5ndGg7aSsrKXsKCQljb29yZEhvbGRlcj1hbGxBcmVhc1tpXTsKCQlpZihjb29yZEhvbGRlclsxXSA+IEltYWdlLmhlaWdodCkgY29vcmRIb2xkZXJbMV0gPSBJbWFnZS5oZWlnaHQ7CgkJQ3JvcFRhYmxlKDAsY29vcmRIb2xkZXJbMF0sSW1hZ2Uud2lkdGgsY29vcmRIb2xkZXJbMV0pCgkJYWxsVGFibGVzLnB1c2goSW1hZ2UudGFibGUuc2xpY2UoKSk7CgkJSW1hZ2UudGFibGU9dGVtcFRhYmxlLnNsaWNlKCk7CgkJSW1hZ2Uud2lkdGggPSBJbWFnZS50YWJsZS5sZW5ndGg7CgkJSW1hZ2UuaGVpZ2h0ID0gSW1hZ2UudGFibGVbMF0ubGVuZ3RoOwoJfQoJdmFyIHRlbXBMZW5ndGggPSBhbGxUYWJsZXMubGVuZ3RoOwoJZm9yKHZhciBpID0gMDsgaSA8IHRlbXBMZW5ndGg7IGkrKykgewoJCUltYWdlLnRhYmxlID0gYWxsVGFibGVzW2ldOwoJCUltYWdlLndpZHRoID0gSW1hZ2UudGFibGUubGVuZ3RoOwoJCUltYWdlLmhlaWdodCA9IEltYWdlLnRhYmxlWzBdLmxlbmd0aDsKCQlDcmVhdGVJbWFnZURhdGEoKTsKCQl2YXIgcmVzdWx0VmVydGljYWwgPSB2ZXJ0aWNhbEFyZWFzKCk7CgkJaWYocmVzdWx0VmVydGljYWwubGVuZ3RoID4gMSkgewoJCQl0ZW1wU2Vjb25kVGFibGUgPSBJbWFnZS50YWJsZS5zbGljZSgpOwoJCQlDcm9wVGFibGUoMCwwLHJlc3VsdFZlcnRpY2FsWzBdWzFdLEltYWdlLmhlaWdodCk7CgkJCWFsbFRhYmxlc1tpXSA9IEltYWdlLnRhYmxlLnNsaWNlKCk7CgkJCWZvcih2YXIgaiA9IDE7IGogPCByZXN1bHRWZXJ0aWNhbC5sZW5ndGg7IGorKykgewoJCQkJSW1hZ2UudGFibGUgPSB0ZW1wU2Vjb25kVGFibGUuc2xpY2UoKTsKCQkJCUltYWdlLndpZHRoID0gSW1hZ2UudGFibGUubGVuZ3RoOwoJCQkJSW1hZ2UuaGVpZ2h0ID0gSW1hZ2UudGFibGVbMF0ubGVuZ3RoOwoJCQkJQ3JvcFRhYmxlKHJlc3VsdFZlcnRpY2FsW2pdWzBdLDAscmVzdWx0VmVydGljYWxbal1bMV0sSW1hZ2UuaGVpZ2h0KTsKCQkJCWFsbFRhYmxlcy5wdXNoKEltYWdlLnRhYmxlLnNsaWNlKCkpOwoJCQl9CgkJfQoJfQoJcmV0dXJuIGFsbFRhYmxlczsKfQoKZnVuY3Rpb24gY29udHJhc3QoZGF0YSxhbW91bnQpIHsKCWFtb3VudCA9IE1hdGgubWF4KDAsTWF0aC5taW4oMjU1LHBhcnNlRmxvYXQoYW1vdW50KXx8MTI3KSk7CgoJdmFyIFRlbXBBcnJheSA9IFtdOwoJZm9yICh2YXIgaT0wOyBpPDI1NjsgaSsrKSB7CgkJdmFyIHZhbHVlID0gTWF0aC50YW4oYW1vdW50ICogTWF0aC5QSS8xODApICogKGktMTI3KSArIDEyNzsKCQlpZiAodmFsdWUgPiAyNTUpIHsKCQkJdmFsdWUgPSAyNTU7CgkJfSBlbHNlIGlmICh2YWx1ZSA8IDApIHsKCQkJdmFsdWUgPSAwOwoJCX0KCQlUZW1wQXJyYXlbaV0gPSB2YWx1ZSB8IDA7Cgl9CgoJZm9yICh2YXIgaT0wLCBsZW49SW1hZ2Uud2lkdGgqSW1hZ2UuaGVpZ2h0KjQ7IGk8bGVuOyBpKz00KSB7CgkJZGF0YVtpXSAgID0gVGVtcEFycmF5W2RhdGFbaV1dOwoJCWRhdGFbaSsxXSA9IFRlbXBBcnJheVtkYXRhW2krMV1dOwoJCWRhdGFbaSsyXSA9IFRlbXBBcnJheVtkYXRhW2krMl1dOwoJfQp9CgpmdW5jdGlvbiBiaW5hcnkoZGF0YSx0aHJlc2hvbGQpIHsKCXRocmVzaG9sZCA9IE1hdGgubWF4KDAsTWF0aC5taW4oMjU1LHBhcnNlRmxvYXQodGhyZXNob2xkKXx8MTI3KSk7CgoJdmFyIGF2ZTsKCglmb3IgKHZhciBpPTAsIGxlbj1JbWFnZS53aWR0aCpJbWFnZS5oZWlnaHQqNDsgaTxsZW47IGkrPTQpIHsKCQlhdmUgPSAoZGF0YVtpXSArIGRhdGFbaSsxXSArIGRhdGFbaSsyXSkgLyAzOwoJCWlmIChhdmUgPCB0aHJlc2hvbGQpIHsKCQkJZGF0YVtpXSA9IGRhdGFbaSsxXSA9IGRhdGFbaSsyXSA9IDA7CgkJfSBlbHNlIHsKCQkJZGF0YVtpXSA9IGRhdGFbaSsxXSA9IGRhdGFbaSsyXSA9IDI1NTsKCQl9CgkJZGF0YVtpKzNdID0gMjU1OwoJfQp9CgpmdW5jdGlvbiBUcmltQmxhY2soaW1nKXsKCXZhciB4X2Nvb3JkaW5hdGVzPVtdCgl2YXIgY291bnQ9MDsKCWZvcih2YXIgaj0wO2o8aW1nLmxlbmd0aDtqKz00KXsKCQlmb3IodmFyIGk9ajtpPGltZy5sZW5ndGg7aSs9SW1hZ2Uud2lkdGgqNCl7CgkJCWNvdW50Kz1pbWdbaV07CgkJfQoJCWlmKGNvdW50L0ltYWdlLmhlaWdodD4xMDApewoJCQl4X2Nvb3JkaW5hdGVzLnB1c2goKGovNCklSW1hZ2Uud2lkdGgpOwoJCQlicmVhazsKCQl9CgkJY291bnQ9MDsKCX0KCWNvdW50PTA7Cglmb3IodmFyIGo9KEltYWdlLndpZHRoKjQtNCk7aj4wO2otPTQpewoJCWZvcih2YXIgaT1qO2k8aW1nLmxlbmd0aDtpKz1JbWFnZS53aWR0aCo0KXsKCQkJY291bnQrPWltZ1tpXTsKCQl9CgkJaWYoY291bnQvSW1hZ2UuaGVpZ2h0PjEwMCl7CgkJCXhfY29vcmRpbmF0ZXMucHVzaCgoai80KSVJbWFnZS53aWR0aCk7CgkJCWJyZWFrOwoJCX0KCQljb3VudD0wOwoJfQoKCXJldHVybiB4X2Nvb3JkaW5hdGVzOwp9CgpmdW5jdGlvbiBIb3Jpem9udGFsQXJlYShpbWcsYmVnaW4sYXJlYSl7CgliZWdpbiA9IHR5cGVvZiBiZWdpbiAhPT0gJ3VuZGVmaW5lZCcgPyBiZWdpbiA6IDE7CgliZWdpbiA9IGJlZ2luPjAgPyBiZWdpbiA6IDE7Cgl2YXIgQmxhY2tBcmVhPTA7Cgl2YXIgc3RhcnQ9MDsKCXZhciBjb3VudD0wOwoJZm9yKHZhciBpPShiZWdpbio0KkltYWdlLndpZHRoKTtpPGltZy5sZW5ndGgvYXJlYTtpKz1JbWFnZS53aWR0aCo0KXsKCQlmb3IodmFyIGo9MDtqPEltYWdlLndpZHRoKjQ7ais9NCl7CgkJCWNvdW50Kz1pbWdbaitpXTsKCQl9CgkJaWYoY291bnQvSW1hZ2Uud2lkdGg+MjMwKXsKCQkJc3RhcnQ9aTsKCQkJYnJlYWs7CgkJfQoJCWNvdW50PTA7Cgl9Cgl2YXIgZW5kaW5nPTA7Cgljb3VudD0wOwoJaWYoc3RhcnQpewoJCWZvcih2YXIgaT1zdGFydDtpPGltZy5sZW5ndGg7aSs9SW1hZ2Uud2lkdGgqNCl7CgkJCWZvcih2YXIgaj0wO2o8SW1hZ2Uud2lkdGgqNDtqKz00KXsKCQkJCWlmKGltZ1tqK2ldPT09MCl7CgkJCQkJY291bnQrKzsKCQkJCX0KCQkJfQoJCQlpZihjb3VudD5JbWFnZS53aWR0aC81KXsKCQkJCUJsYWNrQXJlYT1pOwoJCQkJYnJlYWs7CgkJCX0KCQkJY291bnQ9MDsKCQl9Cgl9ZWxzZXsKCQlmb3IodmFyIGk9KGJlZ2luKjQqSW1hZ2Uud2lkdGgpO2k8aW1nLmxlbmd0aDtpKz1JbWFnZS53aWR0aCo0KXsKCQkJZm9yKHZhciBqPTA7ajxJbWFnZS53aWR0aCo0O2orPTQpewoJCQkJY291bnQrPWltZ1tqK2ldOwoJCQl9CgkJCWlmKGNvdW50L0ltYWdlLndpZHRoPjIzMCl7CgkJCQllbmRpbmc9aTsKCQkJCWJyZWFrOwoJCQl9CgkJCWNvdW50PTA7CgkJfQoJfQoJaWYoc3RhcnQpewoJCXJldHVybiBNYXRoLnJvdW5kKEJsYWNrQXJlYS80L0ltYWdlLndpZHRoKTsKCX1lbHNlewoJCXJldHVybiBbYmVnaW4sTWF0aC5yb3VuZChlbmRpbmcvNC9JbWFnZS53aWR0aCldOwoJfQp9CgpmdW5jdGlvbiBhdmVyYWdlTGluZXMoKXsKCXZhciBhdmVyYWdlPTA7Cgl2YXIgYWxsQXZlcmFnZT1bXTsKCWZvcih2YXIgaT0wO2k8SW1hZ2UuZGF0YS5sZW5ndGg7aSs9SW1hZ2Uud2lkdGgqNCl7CgkJYXZlcmFnZT0wOwoJCWZvcih2YXIgaj1pO2o8KEltYWdlLndpZHRoKjQraSk7ais9NCl7CgkJCWF2ZXJhZ2UrPShJbWFnZS5kYXRhW2pdK0ltYWdlLmRhdGFbaisxXStJbWFnZS5kYXRhW2orMl0pLzMKCQl9CgkJYXZlcmFnZS89SW1hZ2Uud2lkdGg7CgkJYWxsQXZlcmFnZS5wdXNoKGF2ZXJhZ2UpOwoJfQoJdmFyIFljb29yZHM9W10KCWF2ZXJhZ2U9MDsKCXZhciBjb21wYXJpc29uPWFsbEF2ZXJhZ2VbMF0KCWZvcih2YXIgaT0xO2k8YWxsQXZlcmFnZS5sZW5ndGg7aSsrKXsKCQlpZihNYXRoLmFicyhhbGxBdmVyYWdlW2ldLWNvbXBhcmlzb24pPjEzKXsKCQkJWWNvb3Jkcy5wdXNoKFthdmVyYWdlLGktMV0pOwoJCQlhdmVyYWdlPWk7CgkJCWNvbXBhcmlzb249YWxsQXZlcmFnZVtpXTsKCQl9Cgl9CglhdmVyYWdlPTA7Cgl2YXIgcmVzdWx0PVswLEltYWdlLmhlaWdodF07Cglmb3IodmFyIGk9MDtpPFljb29yZHMubGVuZ3RoO2krKyl7CgkJaWYoKFljb29yZHNbaV1bMV0tWWNvb3Jkc1tpXVswXSk+YXZlcmFnZSl7CgkJCWF2ZXJhZ2U9WWNvb3Jkc1tpXVsxXS1ZY29vcmRzW2ldWzBdOwoJCQlyZXN1bHQ9WWNvb3Jkc1tpXTsKCQl9Cgl9CglyZXR1cm4gcmVzdWx0Owp9CgpmdW5jdGlvbiBNYWluKCl7Cgl2YXIgdGFibGVTZWxlY3Rpb249SW1nUHJvY2Vzc2luZygpOwoJdmFyIHN1Y2Nlc3NmdWxEZWNvZGluZ3MgPSAwOwoJZm9yKHZhciB6PTA7ejx0YWJsZVNlbGVjdGlvbi5sZW5ndGg7eisrKXsKCQlJbWFnZS50YWJsZT10YWJsZVNlbGVjdGlvblt6XTsKCQlJbWFnZS53aWR0aCA9IEltYWdlLnRhYmxlLmxlbmd0aDsKCQlJbWFnZS5oZWlnaHQgPSBJbWFnZS50YWJsZVswXS5sZW5ndGg7CgkJQ3JlYXRlSW1hZ2VEYXRhKCk7CgkJdmFyIFNlbGVjdGlvbiA9IGF2ZXJhZ2VMaW5lcygpOwoJCUNyb3BUYWJsZSgwLFNlbGVjdGlvblswXSxJbWFnZS53aWR0aCxTZWxlY3Rpb25bMV0pOwoJCUJsYWNrRWRnZXMoMTAwKTsKCQlSZW1vdmVEaXN0KCk7CgkJdmFyIHNjYWxlZCA9IFNjYWxlSGVpZ2h0KDMwKTsKCQl2YXIgdmFyaWF0aW9uRGF0YTsKCQl2YXIgaW5jcm10PTA7CgkJdmFyIGZvcm1hdCA9ICIiOwoJCXZhciBlYW5TdGF0aXN0aWNzID0ge307CgkJdmFyIGVhbk9yZGVyID0gW107CgkJU2VsZWN0aW9uID0gZmFsc2U7CgkJZG97CgkJCXZhcmlhdGlvbkRhdGEgPSB5U3RyYWlnaHRlbihzY2FsZWQuc3ViYXJyYXkoaW5jcm10LGluY3JtdCtJbWFnZS53aWR0aCo0KSkKCQkJZm9yKHZhciBpID0gMDsgaSA8IEZvcm1hdFByaW9yaXR5Lmxlbmd0aDsgaSsrKSB7CgkJCQlpZihmb3JtYXQgIT0gIkVBTi0xMyIpIHsKCQkJCQlpZihGb3JtYXRQcmlvcml0eVtpXSA9PSAiQ29kZTEyOCIpIHsKCQkJCQkJU2VsZWN0aW9uPUJpbmFyeVN0cmluZyh2YXJpYXRpb25EYXRhLDApOwoJCQkJCQlpZihTZWxlY3Rpb24uc3RyaW5nKSB7CgkJCQkJCQlmb3JtYXQgPSBTZWxlY3Rpb24uZm9ybWF0OwoJCQkJCQkJU2VsZWN0aW9uID0gU2VsZWN0aW9uLnN0cmluZzsKCQkJCQkJfQoJCQkJCX0KCQkJCQlpZihGb3JtYXRQcmlvcml0eVtpXSA9PSAiQ29kZTkzIikgewoJCQkJCQlTZWxlY3Rpb249QmluYXJ5U3RyaW5nKHZhcmlhdGlvbkRhdGEsMSk7CgkJCQkJCWlmKFNlbGVjdGlvbikgZm9ybWF0ID0gIkNvZGU5MyI7CgkJCQkJfQoJCQkJCWlmKEZvcm1hdFByaW9yaXR5W2ldID09ICJDb2RlMzkiKSB7CgkJCQkJCVNlbGVjdGlvbj1CaW5hcnlTdHJpbmcodmFyaWF0aW9uRGF0YSwyKTsKCQkJCQkJaWYoU2VsZWN0aW9uKSBmb3JtYXQgPSAiQ29kZTM5IjsKCQkJCQl9CgkJCQkJaWYoRm9ybWF0UHJpb3JpdHlbaV0gPT0gIjJPZjUiIHx8IEZvcm1hdFByaW9yaXR5W2ldID09ICJJbnRlcjJPZjUiKSB7CgkJCQkJCWlmKEZvcm1hdFByaW9yaXR5W2ldID09ICIyT2Y1IikgewoJCQkJCQkJU2VsZWN0aW9uID0gQmluYXJ5U3RyaW5nKHZhcmlhdGlvbkRhdGEsIDQpOwoJCQkJCQkJaWYoU2VsZWN0aW9uKSBmb3JtYXQgPSAiU3RhbmRhcmQgMiBvZiA1IjsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCVNlbGVjdGlvbiA9IEJpbmFyeVN0cmluZyh2YXJpYXRpb25EYXRhLCA1KTsKCQkJCQkJCWlmKFNlbGVjdGlvbikgZm9ybWF0ID0gIkludGVybGVhdmVkIDIgb2YgNSI7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQlpZihGb3JtYXRQcmlvcml0eVtpXSA9PSAiRUFOLTEzIikgewoJCQkJCXZhciB0ZW1wT2JqID0gQmluYXJ5U3RyaW5nKHZhcmlhdGlvbkRhdGEsMyk7CgkJCQkJU2VsZWN0aW9uPXRlbXBPYmouc3RyaW5nOwoJCQkJCWlmKFNlbGVjdGlvbil7CgkJCQkJCWZvcm1hdCA9ICJFQU4tMTMiOwoJCQkJCQlpZih0eXBlb2YgZWFuU3RhdGlzdGljc1tTZWxlY3Rpb25dID09ICd1bmRlZmluZWQnKSB7CgkJCQkJCQllYW5TdGF0aXN0aWNzW1NlbGVjdGlvbl0gPSB7Y291bnQ6IDEsY29ycmVjdGlvbjogdGVtcE9iai5jb3JyZWN0aW9ufTsKCQkJCQkJCWVhbk9yZGVyLnB1c2goU2VsZWN0aW9uKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWVhblN0YXRpc3RpY3NbU2VsZWN0aW9uXS5jb3VudCA9IGVhblN0YXRpc3RpY3NbU2VsZWN0aW9uXS5jb3VudCsxOwoJCQkJCQkJZWFuU3RhdGlzdGljc1tTZWxlY3Rpb25dLmNvcnJlY3Rpb24gPSBlYW5TdGF0aXN0aWNzW1NlbGVjdGlvbl0uY29ycmVjdGlvbiArIHRlbXBPYmouY29ycmVjdGlvbjsKCQkJCQkJfQoJCQkJCQlpZighRWFuMTNTcGVlZCkgU2VsZWN0aW9uID0gZmFsc2U7CgkJCQkJfQoJCQkJfQoJCQkJaWYoU2VsZWN0aW9uKSBicmVhazsKCQkJfQoJCQlpbmNybXQrPUltYWdlLndpZHRoKjQ7CgkJfXdoaWxlKCFTZWxlY3Rpb24mJmluY3JtdDxzY2FsZWQubGVuZ3RoKQoJCWlmKFNlbGVjdGlvbiYmZm9ybWF0ICE9ICJFQU4tMTMiKSB7CgkJCXBvc3RNZXNzYWdlKHtyZXN1bHQ6IFtTZWxlY3Rpb25dLCBzdWNjZXNzOiB0cnVlLCBmaW5pc2hlZDogZmFsc2V9KTsKCQkJc3VjY2Vzc2Z1bERlY29kaW5ncysrOwoJCX0KCQlpZihmb3JtYXQgPT0gIkVBTi0xMyIgJiYgIUVhbjEzU3BlZWQpIFNlbGVjdGlvbiA9IGZhbHNlOwoJCWlmKCFTZWxlY3Rpb24pewoJCQlFbmxhcmdlVGFibGUoNCwyKTsKCQkJaW5jcm10PTA7CgkJCXNjYWxlZCA9IFNjYWxlSGVpZ2h0KDIwKTsKCQkJZG97CgkJCQl2YXJpYXRpb25EYXRhID0geVN0cmFpZ2h0ZW4oc2NhbGVkLnN1YmFycmF5KGluY3JtdCxpbmNybXQrSW1hZ2Uud2lkdGgqNCkpCgkJCQlmb3IodmFyIGkgPSAwOyBpIDwgRm9ybWF0UHJpb3JpdHkubGVuZ3RoOyBpKyspIHsKCQkJCQlpZihmb3JtYXQgIT0gIkVBTi0xMyIpIHsKCQkJCQkJaWYoRm9ybWF0UHJpb3JpdHlbaV0gPT0gIkNvZGUxMjgiKSB7CgkJCQkJCQlTZWxlY3Rpb249QmluYXJ5U3RyaW5nKHZhcmlhdGlvbkRhdGEsMCk7CgkJCQkJCQlpZihTZWxlY3Rpb24uc3RyaW5nKSB7CgkJCQkJCQkJZm9ybWF0ID0gU2VsZWN0aW9uLmZvcm1hdDsKCQkJCQkJCQlTZWxlY3Rpb24gPSBTZWxlY3Rpb24uc3RyaW5nOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWlmKEZvcm1hdFByaW9yaXR5W2ldID09ICJDb2RlOTMiKSB7CgkJCQkJCQlTZWxlY3Rpb249QmluYXJ5U3RyaW5nKHZhcmlhdGlvbkRhdGEsMSk7CgkJCQkJCQlpZihTZWxlY3Rpb24pIGZvcm1hdCA9ICJDb2RlOTMiOwoJCQkJCQl9CgkJCQkJCWlmKEZvcm1hdFByaW9yaXR5W2ldID09ICJDb2RlMzkiKSB7CgkJCQkJCQlTZWxlY3Rpb249QmluYXJ5U3RyaW5nKHZhcmlhdGlvbkRhdGEsMik7CgkJCQkJCQlpZihTZWxlY3Rpb24pIGZvcm1hdCA9ICJDb2RlMzkiOwoJCQkJCQl9CgkJCQkJCWlmKEZvcm1hdFByaW9yaXR5W2ldID09ICIyT2Y1IiB8fCBGb3JtYXRQcmlvcml0eVtpXSA9PSAiSW50ZXIyT2Y1IikgewoJCQkJCQkJaWYoRm9ybWF0UHJpb3JpdHlbaV0gPT0gIjJPZjUiKSB7CgkJCQkJCQkJU2VsZWN0aW9uID0gQmluYXJ5U3RyaW5nKHZhcmlhdGlvbkRhdGEsIDQpOwoJCQkJCQkJCWlmKFNlbGVjdGlvbikgZm9ybWF0ID0gIlN0YW5kYXJkIDIgb2YgNSI7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCVNlbGVjdGlvbiA9IEJpbmFyeVN0cmluZyh2YXJpYXRpb25EYXRhLCA1KTsKCQkJCQkJCQlpZihTZWxlY3Rpb24pIGZvcm1hdCA9ICJJbnRlcmxlYXZlZCAyIG9mIDUiOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCWlmKEZvcm1hdFByaW9yaXR5W2ldID09ICJFQU4tMTMiKSB7CgkJCQkJCXZhciB0ZW1wT2JqID0gQmluYXJ5U3RyaW5nKHZhcmlhdGlvbkRhdGEsMyk7CgkJCQkJCVNlbGVjdGlvbj10ZW1wT2JqLnN0cmluZzsKCQkJCQkJaWYoU2VsZWN0aW9uKXsKCQkJCQkJCWZvcm1hdCA9ICJFQU4tMTMiOwoJCQkJCQkJaWYodHlwZW9mIGVhblN0YXRpc3RpY3NbU2VsZWN0aW9uXSA9PSAndW5kZWZpbmVkJykgewoJCQkJCQkJCWVhblN0YXRpc3RpY3NbU2VsZWN0aW9uXSA9IHtjb3VudDogMSxjb3JyZWN0aW9uOiB0ZW1wT2JqLmNvcnJlY3Rpb259OwoJCQkJCQkJCWVhbk9yZGVyLnB1c2goU2VsZWN0aW9uKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJZWFuU3RhdGlzdGljc1tTZWxlY3Rpb25dLmNvdW50ID0gZWFuU3RhdGlzdGljc1tTZWxlY3Rpb25dLmNvdW50KzE7CgkJCQkJCQkJZWFuU3RhdGlzdGljc1tTZWxlY3Rpb25dLmNvcnJlY3Rpb24gPSBlYW5TdGF0aXN0aWNzW1NlbGVjdGlvbl0uY29ycmVjdGlvbiArIHRlbXBPYmouY29ycmVjdGlvbjsKCQkJCQkJCX0KCQkJCQkJCWlmKCFFYW4xM1NwZWVkKSBTZWxlY3Rpb24gPSBmYWxzZTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlpZihTZWxlY3Rpb24pIGJyZWFrOwoJCQkJfQoJCQkJaW5jcm10Kz1JbWFnZS53aWR0aCo0OwoJCQl9d2hpbGUoIVNlbGVjdGlvbiYmaW5jcm10PHNjYWxlZC5sZW5ndGgpCgkJCWlmKFNlbGVjdGlvbiAmJiBmb3JtYXQgIT0gIkVBTi0xMyIpIHsKCQkJCXBvc3RNZXNzYWdlKHtyZXN1bHQ6IFtTZWxlY3Rpb25dLCBzdWNjZXNzOiB0cnVlLCBmaW5pc2hlZDogZmFsc2V9KTsKCQkJCXN1Y2Nlc3NmdWxEZWNvZGluZ3MrKzsKCQkJfQoJCX0KCQlpZihmb3JtYXQgPT0gIkVBTi0xMyIpIHsKCQkJdmFyIHBvaW50cyA9IHt9OwoJCQlmb3IodmFyIGtleSBpbiBlYW5TdGF0aXN0aWNzKSB7CgkJCQllYW5TdGF0aXN0aWNzW2tleV0uY29ycmVjdGlvbiA9IGVhblN0YXRpc3RpY3Nba2V5XS5jb3JyZWN0aW9uL2VhblN0YXRpc3RpY3Nba2V5XS5jb3VudDsKCQkJCXZhciBwb2ludFRlbXAgPSBlYW5TdGF0aXN0aWNzW2tleV0uY29ycmVjdGlvbjsKCQkJCWlmKEVhbjEzU3BlZWQpIHsKCQkJCQlwb2ludFRlbXAgLT0gZWFuU3RhdGlzdGljc1trZXldLmNvdW50KjQ7CgkJCQl9IGVsc2UgewoJCQkJCXBvaW50VGVtcCAtPSBlYW5TdGF0aXN0aWNzW2tleV0uY291bnQ7CgkJCQl9CgkJCQlwb2ludFRlbXAgKz0gZWFuT3JkZXIuaW5kZXhPZihrZXkpOwoJCQkJcG9pbnRzW2tleV0gPSBwb2ludFRlbXA7CgkJCX0KCQkJdmFyIG1pblBvaW50cyA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKCQkJdmFyIHRlbXBTdHJpbmcgPSAiIjsKCQkJZm9yKHZhciBrZXkgaW4gcG9pbnRzKSB7CgkJCQlpZihwb2ludHNba2V5XSA8IG1pblBvaW50cykgewoJCQkJCW1pblBvaW50cyA9ICBwb2ludHNba2V5XTsKCQkJCQl0ZW1wU3RyaW5nID0ga2V5OwoJCQkJfQoJCQl9CgkJCWlmKG1pblBvaW50cyA8IDExKSB7CgkJCQlTZWxlY3Rpb24gPSB0ZW1wU3RyaW5nOwoJCQl9IGVsc2UgewoJCQkJU2VsZWN0aW9uID0gZmFsc2U7CgkJCX0KCQkJaWYoU2VsZWN0aW9uKSB7CgkJCQlwb3N0TWVzc2FnZSh7cmVzdWx0OiBbU2VsZWN0aW9uXSwgc3VjY2VzczogdHJ1ZSwgZmluaXNoZWQ6IGZhbHNlfSk7CgkJCQlzdWNjZXNzZnVsRGVjb2RpbmdzKys7CgkJCX0KCQl9CgkJaWYoc3VjY2Vzc2Z1bERlY29kaW5ncyA+PSBEZWNvZGVOcikgYnJlYWs7Cgl9CglyZXR1cm4gW107Cn0KCmZ1bmN0aW9uIHlTdHJhaWdodGVuKGltZyl7Cgl2YXIgYXZlcmFnZT0wOwoJdmFyIHRocmVzaG9sZDsKCXZhciBuZXdJbWcgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoSW1hZ2Uud2lkdGgqMTUwKjQpOwoJZm9yKHZhciBpPTA7aTxuZXdJbWcubGVuZ3RoO2krKyl7CgkJbmV3SW1nW2ldPTI1NTsKCX0KCWZvcih2YXIgaT0wO2k8SW1hZ2Uud2lkdGgqNDtpKz00KXsKCQl0aHJlc2hvbGQ9MTgwCgkJYXZlcmFnZT0oaW1nW2ldK2ltZ1tpKzFdK2ltZ1tpKzJdKS8zOwoJCWF2ZXJhZ2UrPShpbWdbaSs0XStpbWdbaSs1XStpbWdbaSs2XSkvMzsKCQlhdmVyYWdlLz0yOwoJCWZvcih2YXIgaj1pO2o8bmV3SW1nLmxlbmd0aDtqKz1JbWFnZS53aWR0aCo0KXsKCQkJaWYoYXZlcmFnZTx0aHJlc2hvbGQpewoJCQkJbmV3SW1nW2pdPW5ld0ltZ1tqKzFdPW5ld0ltZ1tqKzJdPTA7CgkJCX0KCQkJdGhyZXNob2xkLS07CgkJfQoJfQoJcmV0dXJuIG5ld0ltZzsKfQoKZnVuY3Rpb24gVHdvT2ZGaXZlU3RhcnRFbmQodmFsdWVzLCBzdGFydCkgewoJaWYodmFsdWVzLmxlbmd0aCA8IDUgfHwgdmFsdWVzLmxlbmd0aCA+IDYpIHJldHVybiBmYWxzZTsKCXZhciBtYXggPSBbWzAsMF0sWzAsMF1dOwoJZm9yKHZhciB1ID0gMDsgdSA8IHZhbHVlcy5sZW5ndGg7IHUrKykgewoJCWlmKHZhbHVlc1t1XSA+IG1heFswXVswXSkgewoJCQltYXhbMF1bMF0gPSB2YWx1ZXNbdV07CgkJCXZhciBwcmV2cG9zID0gbWF4WzBdWzFdOwoJCQltYXhbMF1bMV0gPSB1OwoJCQl1ID0gcHJldnBvczsKCQl9CgkJaWYodmFsdWVzW3VdID4gbWF4WzFdWzBdICYmIHUgIT0gbWF4WzBdWzFdKSB7CgkJCW1heFsxXVswXSA9IHZhbHVlc1t1XTsKCQkJbWF4WzFdWzFdID0gdTsKCQl9Cgl9Cgl2YXIgd2lkZUF2cmcgPSBtYXhbMF1bMF0gKyBtYXhbMV1bMF07Cgl3aWRlQXZyZyAvPSAyOwoJaWYobWF4WzBdWzBdIC8gd2lkZUF2cmcgPiAxLjIgfHwgbWF4WzBdWzBdIC8gd2lkZUF2cmcgPCAwLjgpIHJldHVybiBmYWxzZTsKCWlmKG1heFsxXVswXSAvIHdpZGVBdnJnID4gMS4yIHx8IG1heFsxXVswXSAvIHdpZGVBdnJnIDwgMC44KSByZXR1cm4gZmFsc2U7Cgl2YXIgbmFycm93QXZyZyA9IDA7Cglmb3IodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7CgkJaWYoaSA9PSBtYXhbMF1bMV0gfHwgaSA9PSBtYXhbMV1bMV0pIGNvbnRpbnVlOwoJCW5hcnJvd0F2cmcgKz0gdmFsdWVzW2ldOwoJfQoJbmFycm93QXZyZyAvPSB2YWx1ZXMubGVuZ3RoIC0gMjsKCWZvcih2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsKCQlpZihpID09IG1heFswXVsxXSB8fCBpID09IG1heFsxXVsxXSkgY29udGludWU7CgkJaWYodmFsdWVzW2ldIC8gbmFycm93QXZyZyA+IDEuNCB8fCB2YWx1ZXNbaV0gLyBuYXJyb3dBdnJnIDwgMC42KSByZXR1cm4gZmFsc2U7Cgl9CglpZihzdGFydCkgewoJCXJldHVybiAobWF4WzBdWzFdID09IDAgfHwgbWF4WzBdWzFdID09IDIpICYmIChtYXhbMV1bMV0gPT0gMCB8fCBtYXhbMV1bMV0gPT0gMik7Cgl9ZWxzZSB7CgkJcmV0dXJuIChtYXhbMF1bMV0gPT0gMCB8fCBtYXhbMF1bMV0gPT0gNCkgJiYgKG1heFsxXVsxXSA9PSAwIHx8IG1heFsxXVsxXSA9PSA0KTsKCX0KfQoKZnVuY3Rpb24gQ2hlY2tJbnRlcmxlYXZlZCh2YWx1ZXMsIHN0YXJ0KSB7Cgl2YXIgYXZlcmFnZSA9IDA7Cglmb3IodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7CgkJYXZlcmFnZSArPSB2YWx1ZXNbaV07Cgl9CglhdmVyYWdlIC89IDQ7CglpZihzdGFydCkgewoJCWlmKHZhbHVlcy5sZW5ndGggIT0gNCkgcmV0dXJuIGZhbHNlOwoJCWZvcih2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsKCQkJaWYodmFsdWVzW2ldL2F2ZXJhZ2UgPCAwLjggfHwgdmFsdWVzW2ldL2F2ZXJhZ2UgPiAxLjIpIHJldHVybiBmYWxzZTsKCQl9CgkJcmV0dXJuIHRydWU7Cgl9IGVsc2UgewoJCWlmKHZhbHVlcy5sZW5ndGggIT0gMykgcmV0dXJuIGZhbHNlOwoJCXZhciBtYXggPSAwOwoJCXZhciBwb3M7CgkJZm9yKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewoJCQlpZih2YWx1ZXNbaV0gPiBtYXgpIHsKCQkJCW1heCA9IHZhbHVlc1tpXTsKCQkJCXBvcyA9IGk7CgkJCX0KCQl9CgkJaWYocG9zICE9IDApIHJldHVybiBmYWxzZTsKCQlpZih2YWx1ZXNbMF0vYXZlcmFnZSA8IDEuNSB8fCB2YWx1ZXNbMF0vYXZlcmFnZSA+IDIuNSkgcmV0dXJuIGZhbHNlOwoJCWZvcih2YXIgaSA9IDE7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsKCQkJaWYodmFsdWVzW2ldL2F2ZXJhZ2UgPCAwLjUgfHwgdmFsdWVzW2ldL2F2ZXJhZ2UgPiAxLjUpIHJldHVybiBmYWxzZTsKCQl9CgkJcmV0dXJuIHRydWU7Cgl9Cn0KCmZ1bmN0aW9uIGNvbnRyYXN0QmluYXJ5KGRhdGEpIHsKICAgIHZhciBtaW4gPSAxMjcgKiAzOwogICAgdmFyIG1heCA9IDEyOCAqIDM7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gSW1hZ2Uud2lkdGggKiBJbWFnZS5oZWlnaHQgKiA0OyBpIDwgbGVuOyBpICs9IDQpIHsKICAgICAgICB2YXIgdmFsID0gZGF0YVtpXSArIGRhdGFbaSArIDFdICsgZGF0YVtpICsgMl07CiAgICAgICAgaWYgKHZhbCA8IG1pbikgewogICAgICAgICAgICBtaW4gPSB2YWw7CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPiBtYXgpIHsKICAgICAgICAgICAgbWF4ID0gdmFsOwogICAgICAgIH0KICAgIH0KICAgIHZhciB0aHJlc2hvbGQgPSAobWF4ICsgbWluKSAvIDI7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gSW1hZ2Uud2lkdGggKiBJbWFnZS5oZWlnaHQgKiA0OyBpIDwgbGVuOyBpICs9IDQpIHsKICAgICAgICBhdmUgPSAoZGF0YVtpXSArIGRhdGFbaSArIDFdICsgZGF0YVtpICsgMl0pOwogICAgICAgIGlmIChhdmUgPCB0aHJlc2hvbGQpIHsKICAgICAgICAgICAgZGF0YVtpXSA9IGRhdGFbaSArIDFdID0gZGF0YVtpICsgMl0gPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdGFbaV0gPSBkYXRhW2kgKyAxXSA9IGRhdGFbaSArIDJdID0gMjU1OwogICAgICAgIH0KICAgICAgICBkYXRhW2kgKyAzXSA9IDI1NTsKICAgIH0KfQoKZnVuY3Rpb24gQmluYXJ5U3RyaW5nKGltZyx0eXBlKXsKCXZhciBiaW5hcnlTdHJpbmc9W107Cgl2YXIgYmluVGVtcD1bXTsKCXZhciBjb3VudD0wOwoJdmFyIGJhcnM7Cgl2YXIgbGVuOwoJdmFyIHRvdGFsQmFyczsKCXZhciBza2lwV2hpdGUgPSBmYWxzZTsKCWlmKHR5cGUgPT0gMCkgewoJCXRvdGFsQmFycyA9IDY7Cgl9CglpZih0eXBlID09IDEpIHsKCQl0b3RhbEJhcnMgPSA2OwoJfQoJaWYodHlwZSA9PSAyKSB7CgkJdG90YWxCYXJzID0gOTsKCX0KCWlmKHR5cGUgPT0gMykgewoJCXRvdGFsQmFycyA9IDQ7Cgl9CglpZih0eXBlID09IDQpIHsKCQl0b3RhbEJhcnMgPSA1OwoJfQoJaWYodHlwZSA9PSA1KSB7CgkJdG90YWxCYXJzID0gMTA7Cgl9Cgl2YXIgdHJpZ2dlcj1mYWxzZTsKCXZhciBjb250YWluZXI9MjU1OwoJdmFyIGZpcnN0RWFuID0gZmFsc2U7Cgl2YXIgRWFuQ291bnRlciA9IDA7Cgl2YXIgY29ycmVjdGlvbnMgPSAwOwoJZm9yKHZhciBqPTA7ajxpbWcubGVuZ3RoIC0gSW1hZ2Uud2lkdGgqNDtqKz1JbWFnZS53aWR0aCo0KXsKCQl2YXIgU2xpY2VkQXJyYXkgPSBpbWcuc3ViYXJyYXkoaixqK0ltYWdlLndpZHRoKjQpCgkJbGVuID0gQmFyTGVuZ3RoKFNsaWNlZEFycmF5KTsKCQljb3JyZWN0aW9ucyA9IDAKCQlpZih0eXBlID09IDAgfHwgdHlwZSA9PSA0KSBsZW4vPTI7CgkJYmluYXJ5U3RyaW5nPVtdOwoJCWJhcnM9MDsKCQliaW5UZW1wPVtdCgkJYmluVGVtcEludGVyID0gW10KCQl0cmlnZ2VyPWZhbHNlOwoJCXZhciBzd2l0Y2hUb3RhbCA9IGZhbHNlOwoJCWZvcih2YXIgaT0wO2k8U2xpY2VkQXJyYXkubGVuZ3RoO2krPTQpewoJCQljb3VudD0wOwoJCQlpZighdHJpZ2dlciYmU2xpY2VkQXJyYXlbaV09PT0wKXsKCQkJCXRyaWdnZXI9dHJ1ZTsKCQkJCWZpcnN0RWFuID0gdHJ1ZTsKCQkJCWlmKHR5cGUgPT0gNCkgewoJCQkJCWNvbnRhaW5lcj1TbGljZWRBcnJheVtpXQoJCQkJCXZhciBUd29PZkZpdmVCaW4gPSBbMCwwLDAsMCwwLDBdOwoJCQkJCWRvewoJCQkJCQlUd29PZkZpdmVCaW5bY291bnRdID0gVHdvT2ZGaXZlQmluW2NvdW50XSArIDE7CgkJCQkJCWkrPTQ7CgkJCQkJCWlmKGNvbnRhaW5lciAhPSBTbGljZWRBcnJheVtpXSkgewoJCQkJCQkJY291bnQrKzsKCQkJCQkJCWNvbnRhaW5lcj1TbGljZWRBcnJheVtpXQoJCQkJCQl9CgkJCQkJfXdoaWxlKGNvdW50IDwgNiAmJiBpIDwgU2xpY2VkQXJyYXkubGVuZ3RoKQoJCQkJCWlmKCFUd29PZkZpdmVTdGFydEVuZChUd29PZkZpdmVCaW4sIHRydWUpKSB7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCQljb3VudCA9IDA7CgkJCQl9CgkJCQlpZih0eXBlID09IDUpIHsKCQkJCQljb250YWluZXI9U2xpY2VkQXJyYXlbaV0KCQkJCQl2YXIgaW50ZXJCaW4gPSBbMCwwLDAsMF07CgkJCQkJZG97CgkJCQkJCWludGVyQmluW2NvdW50XSA9IGludGVyQmluW2NvdW50XSArIDE7CgkJCQkJCWkrPTQ7CgkJCQkJCWlmKGNvbnRhaW5lciAhPSBTbGljZWRBcnJheVtpXSkgewoJCQkJCQkJY291bnQrKzsKCQkJCQkJCWNvbnRhaW5lcj1TbGljZWRBcnJheVtpXQoJCQkJCQl9CgkJCQkJfXdoaWxlKGNvdW50IDwgNCAmJiBpIDwgU2xpY2VkQXJyYXkubGVuZ3RoKQoJCQkJCWlmKCFDaGVja0ludGVybGVhdmVkKGludGVyQmluLCB0cnVlKSkgYnJlYWs7CgkJCQkJY291bnQgPSAwOwoJCQkJfQoJCQl9CgkJCWlmKHRyaWdnZXIpewoJCQkJY29udGFpbmVyPVNsaWNlZEFycmF5W2ldCgkJCQlkb3sKCQkJCQljb3VudCsrOwoJCQkJCWkrPTQ7CgkJCQkJaWYodHlwZSA9PSA1ICYmIGNvdW50L2xlbiA+IDUpIHsKCQkJCQkJdmFyIGNoZWNrRGF0YSA9IFtdCgkJCQkJCWZvcih2YXIgcSA9IDA7IHEgPCBiaW5UZW1wLmxlbmd0aDsgcSsrKSB7CgkJCQkJCQljaGVja0RhdGEucHVzaChiaW5UZW1wW3FdKTsKCQkJCQkJCWlmKHEgPj0gYmluVGVtcEludGVyLmxlbmd0aCkgY29udGludWU7CgkJCQkJCQljaGVja0RhdGEucHVzaChiaW5UZW1wSW50ZXJbcV0pOwoJCQkJCQl9CgkJCQkJCWlmKCFDaGVja0ludGVybGVhdmVkKGNoZWNrRGF0YSwgZmFsc2UpKSB7CgkJCQkJCQliaW5hcnlTdHJpbmcgPSBbXTsKCQkJCQkJCWJyZWFrOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQkJaWYoaSA+PSBTbGljZWRBcnJheS5sZW5ndGgpIGJyZWFrOwoJCQkJfXdoaWxlKFNsaWNlZEFycmF5W2ldPT09Y29udGFpbmVyKQoJCQkJaWYodHlwZSA9PSAyICYmIHNraXBXaGl0ZSkgewoJCQkJCXNraXBXaGl0ZSA9IGZhbHNlOwoJCQkJCWNvbnRpbnVlOwoJCQkJfQoJCQkJaWYodHlwZSAhPSA0IHx8IHR5cGUgIT0gNSkgY291bnQgLz0gbGVuOwoJCQkJaWYodHlwZSA9PSA1KSB7CgkJCQkJaWYoY29udGFpbmVyID09IDApIHsKCQkJCQkJYmluVGVtcC5wdXNoKGNvdW50KTsKCQkJCQl9IGVsc2UgewoJCQkJCQliaW5UZW1wSW50ZXIucHVzaChjb3VudCk7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQliaW5UZW1wLnB1c2goY291bnQpCgkJCQl9CgkJCQliYXJzKys7CgkJCQlpZih0eXBlID09IDQgJiYgU2xpY2VkQXJyYXlbaV0gPT0gMjU1KSB7CgkJCQkJdmFyIHRlbXBDb3VudGVyID0gMDsKCQkJCQlkb3sKCQkJCQkJdGVtcENvdW50ZXIrKzsKCQkJCQkJaSs9NDsKCQkJCQkJaWYodGVtcENvdW50ZXIvbGVuID4gMykgewoJCQkJCQlpZighVHdvT2ZGaXZlU3RhcnRFbmQoYmluVGVtcCwgZmFsc2UpKSB7CgkJCQkJCQliaW5hcnlTdHJpbmcgPSBbXTsKCQkJCQkJCWJyZWFrOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQkJfXdoaWxlKFNsaWNlZEFycmF5W2ldID09IDI1NSAmJiBpIDwgU2xpY2VkQXJyYXkubGVuZ3RoKQoJCQkJfQoJCQkJaWYodHlwZSA9PSA0ICYmIGkgPj0gU2xpY2VkQXJyYXkubGVuZ3RoIC0gNCkgewoJCQkJCWRvIHsKCQkJCQkJaS09NDsKCQkJCQl9d2hpbGUoU2xpY2VkQXJyYXlbaV0gPT0gMjU1ICYmIGkgPj0gMCkKCQkJCQljb250YWluZXIgPSBTbGljZWRBcnJheVtpXTsKCQkJCQl2YXIgVHdvT2ZGaXZlQmluID0gWzAsMCwwLDAsMF07CgkJCQkJY291bnQgPSAwOwoJCQkJCWRvewoJCQkJCQlUd29PZkZpdmVCaW5bY291bnRdID0gVHdvT2ZGaXZlQmluW2NvdW50XSArIDE7CgkJCQkJCWktPTQ7CgkJCQkJCWlmKGNvbnRhaW5lciAhPSBTbGljZWRBcnJheVtpXSkgewoJCQkJCQkJY291bnQrKzsKCQkJCQkJCWNvbnRhaW5lcj1TbGljZWRBcnJheVtpXQoJCQkJCQl9CgkJCQkJfXdoaWxlKGNvdW50IDwgNSAmJiBpID49IDApCgkJCQkJaWYoIVR3b09mRml2ZVN0YXJ0RW5kKFR3b09mRml2ZUJpbiwgZmFsc2UpKSB7CgkJCQkJCWJpbmFyeVN0cmluZyA9IFtdOwoJCQkJCQlicmVhazsKCQkJCQl9IGVsc2UgewoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQkJY291bnQgPSAwOwoJCQkJfQoJCQkJaWYoYmFycyA9PSAzICYmIHR5cGUgPT0gMyAmJiBmaXJzdEVhbikgewoJCQkJCWJhcnMgPSAwOwoJCQkJCWJpblRlbXAgPSBbXTsKCQkJCQlmaXJzdEVhbiA9IGZhbHNlOwoJCQkJfQoJCQkJaWYoYmFycz09PXRvdGFsQmFycyl7CgkJCQkJaWYodHlwZSA9PSAzICYmIEVhbkNvdW50ZXIgPT0gNikgewoJCQkJCQlFYW5Db3VudGVyID0gMDsKCQkJCQkJYmFycyA9IDA7CgkJCQkJCWlmKHN3aXRjaFRvdGFsKSB7CgkJCQkJCQl0b3RhbEJhcnMgPSA0OwoJCQkJCQl9CgkJCQkJCWJpblRlbXAgPSBbXTsKCQkJCQkJY29udGludWU7CgkJCQkJfQoJCQkJCWlmKEVhbkNvdW50ZXIgPT0gNSAmJiAhc3dpdGNoVG90YWwpIHsKCQkJCQkJc3dpdGNoVG90YWwgPSB0cnVlOwoJCQkJCQl0b3RhbEJhcnMgPSA1OwoJCQkJCX0KCQkJCQliaW5hcnlTdHJpbmcucHVzaChiaW5UZW1wKQoJCQkJCWJhcnM9MDsKCQkJCQliaW5UZW1wPVtdCgkJCQkJaWYodHlwZSA9PSA1KSB7CgkJCQkJCWJpbmFyeVN0cmluZy5wdXNoKGJpblRlbXBJbnRlcik7CgkJCQkJCWJpblRlbXBJbnRlciA9IFtdOwoJCQkJCX0KCQkJCQlpZih0eXBlID09IDMpIEVhbkNvdW50ZXIrKzsKCQkJCQlpZih0eXBlID09IDIpIHNraXBXaGl0ZSA9IHRydWU7CgkJCQl9CgkJCQlpLT00OwoJCQkJaWYodHlwZSA9PSAzICYmIGJpbmFyeVN0cmluZy5sZW5ndGggPiAxMikgYnJlYWs7CgkJCX0KCQl9CgkJYmluVGVtcD1EaXN0cmlidXRpb24oYmluYXJ5U3RyaW5nLHR5cGUpOwoJCWlmKHR5cGUgPT0gMykgewoJCQliaW5hcnlTdHJpbmcgPSBiaW5UZW1wLmRhdGE7CgkJCWNvcnJlY3Rpb25zID0gYmluVGVtcC5jb3JyZWN0aW9uOwoJCX1lbHNlIHsKCQkJYmluYXJ5U3RyaW5nID0gYmluVGVtcDsKCQl9CgkJaWYoYmluYXJ5U3RyaW5nLmxlbmd0aD40KXsKCQkJaWYodHlwZSA9PSAwKSB7CgkJCQlpZihDaGVja0NvZGUxMjgoYmluYXJ5U3RyaW5nKSl7CgkJCQkJYmluYXJ5U3RyaW5nID0gRGVjb2RlQ29kZTEyOChiaW5hcnlTdHJpbmcpOwoJCQkJCWJyZWFrOwoJCQkJfQoJCQl9ZWxzZSBpZih0eXBlID09IDEpIHsKCQkJCWlmKENoZWNrQ29kZTkzKGJpbmFyeVN0cmluZykpIHsKCQkJCQliaW5hcnlTdHJpbmcgPSBEZWNvZGVDb2RlOTMoYmluYXJ5U3RyaW5nKTsKCQkJCQlicmVhazsKCQkJCX0KCQkJfWVsc2UgaWYodHlwZSA9PSAyKSB7CgkJCQlpZihDaGVja0NvZGUzOShiaW5hcnlTdHJpbmcpKSB7CgkJCQkJYmluYXJ5U3RyaW5nID0gRGVjb2RlQ29kZTM5KGJpbmFyeVN0cmluZyk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0gZWxzZSBpZih0eXBlID09IDMpIHsKCQkJCXZhciB0ZW1wU3RyaW5nID0gRGVjb2RlRUFOMTMoYmluYXJ5U3RyaW5nKTsKCQkJCWlmKHRlbXBTdHJpbmcpIHsKCQkJCQlpZih0ZW1wU3RyaW5nLmxlbmd0aCA9PT0gMTMpIHsKCQkJCQkJYmluYXJ5U3RyaW5nID0gdGVtcFN0cmluZzsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9IGVsc2UgaWYodHlwZSA9PSA0IHx8IHR5cGUgPT0gNSkgewoJCQkJdmFyIHRlbXBTdHJpbmcgPSBEZWNvZGUyT2Y1KGJpbmFyeVN0cmluZyk7CgkJCQlpZih0ZW1wU3RyaW5nKSB7CgkJCQkJYmluYXJ5U3RyaW5nID0gdGVtcFN0cmluZzsKCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0KCX0KCWlmKHR5cGUgPT0gMCkgewoJCWlmKHR5cGVvZiBiaW5hcnlTdHJpbmcuc3RyaW5nICA9PT0gJ3N0cmluZycpIHsKCQkJcmV0dXJuIGJpbmFyeVN0cmluZzsKCQl9IGVsc2UgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoJaWYodHlwZW9mIGJpbmFyeVN0cmluZyAgPT09ICdzdHJpbmcnKXsKCQlpZih0eXBlID09IDMpIHsKCQkJcmV0dXJuIHtzdHJpbmc6IGJpbmFyeVN0cmluZywgY29ycmVjdGlvbjogY29ycmVjdGlvbnN9OwoJCX0gZWxzZSB7CgkJCXJldHVybiBiaW5hcnlTdHJpbmc7CgkJfQoJfWVsc2V7CgkJcmV0dXJuIGZhbHNlOwoJfQp9CgpmdW5jdGlvbiBCYXJMZW5ndGgoaW1nKXsKCXZhciBjb3VudGVyPTA7Cglmb3IodmFyIGo9MDtqPGltZy5sZW5ndGg7ais9NCl7CgkJaWYoaW1nW2pdPT09MCl7CgkJCWRvewoJCQkJY291bnRlcisrOwoJCQkJais9NDsKCQkJfXdoaWxlKGltZ1tqXT09PTApCgkJCWJyZWFrOwoJCX0KCX0KCXJldHVybiBjb3VudGVyOwp9CgpmdW5jdGlvbiBEaXN0cmlidXRpb24odG90YWxCaW5BcnJheSx0eXBlKXsKCXZhciB0ZXN0RGF0YSA9IDA7Cgl2YXIgcmVzdWx0ID0gW107Cgl2YXIgdG90YWxCYXJzOwoJdmFyIHRvdGFsOwoJdmFyIG1heExlbmd0aDsKCWlmKHR5cGUgPT09IDApIHsKCQl0b3RhbCA9IDExOwoJCXRvdGFsQmFycyA9IDY7CgkJbWF4TGVuZ3RoID0gNDsKCX1lbHNlIGlmKHR5cGUgPT09IDEpIHsKCQl0b3RhbCA9IDk7CgkJdG90YWxCYXJzID0gNjsKCQltYXhMZW5ndGggPSA0OwoJfWVsc2UgaWYodHlwZSA9PT0gMikgewoJCXRvdGFsID0gMTI7CgkJdG90YWxCYXJzID0gOTsKCX1lbHNlIGlmKHR5cGUgPT09IDMpIHsKCQl0b3RhbCA9IDc7CgkJdG90YWxCYXJzID0gNDsKCQltYXhMZW5ndGggPSA0OwoJfQoJZm9yKHZhciBrID0gMDsgayA8IHRvdGFsQmluQXJyYXkubGVuZ3RoOyBrKyspIHsKCQl2YXIgQmluQXJyYXkgPSB0b3RhbEJpbkFycmF5W2tdOwoJCXZhciBzdW09MDsKCQlzdW0gPSAwOwoJCXZhciBjb3VudGVyID0gMDsKCQl2YXIgdGVtcEJpbj1bXQoJCXZhciBuYXJyb3dBcnIgPSBbXTsKCQl2YXIgd2lkZUFyciA9IFtdOwoJCWlmKHR5cGUgPT0gNCB8fCB0eXBlID09IDUpIHsKCQkJdmFyIG1heCA9IFtbMCwwXSwgWzAsMF1dOwoJCQlmb3IodmFyIGkgPSAwOyBpIDwgQmluQXJyYXkubGVuZ3RoOyBpKyspIHsKCQkJCWlmKCFpc0Zpbml0ZShCaW5BcnJheVtpXSkpIHJldHVybiBbXTsKCQkJCWlmKEJpbkFycmF5W2ldID4gbWF4WzBdWzBdKSB7CgkJCQkJbWF4WzBdWzBdID0gQmluQXJyYXlbaV07CgkJCQkJdmFyIHByZXZQb3MgPSBtYXhbMF1bMV07CgkJCQkJbWF4WzBdWzFdID0gaTsKCQkJCQlpID0gcHJldlBvcyAtIDE7CgkJCQl9CgkJCQlpZihCaW5BcnJheVtpXSA+IG1heFsxXVswXSAmJiBpICE9IG1heFswXVsxXSkgewoJCQkJCW1heFsxXVswXSA9IEJpbkFycmF5W2ldOwoJCQkJCW1heFsxXVsxXSA9IGk7CgkJCQl9CgkJCX0KCQkJaWYoU2VjdXJlMk9mNSkgewoJCQkJd2lkZUF2cmcgPSBtYXhbMF1bMF0gKyBtYXhbMV1bMF07CgkJCQl3aWRlQXZyZyAvPSAyOwoJCQkJaWYobWF4WzBdWzBdIC8gd2lkZUF2cmcgPiAxLjIgfHwgbWF4WzBdWzBdIC8gd2lkZUF2cmcgPCAwLjgpIHJldHVybiBbXTsKCQkJCWlmKG1heFsxXVswXSAvIHdpZGVBdnJnID4gMS4yIHx8IG1heFsxXVswXSAvIHdpZGVBdnJnIDwgMC44KSByZXR1cm4gW107CgkJCQluYXJyb3dBdnJnID0gMDsKCQkJCWZvcih2YXIgaSA9IDA7IGkgPCBCaW5BcnJheS5sZW5ndGg7IGkrKykgewoJCQkJCWlmKGkgPT0gbWF4WzBdWzFdIHx8IGkgPT0gbWF4WzFdWzFdKSBjb250aW51ZTsKCQkJCQluYXJyb3dBdnJnICs9IEJpbkFycmF5W2ldOwoJCQkJfQoJCQkJbmFycm93QXZyZyAvPSAzOwoJCQkJZm9yKHZhciBpID0gMDsgaSA8IEJpbkFycmF5Lmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYoaSA9PSBtYXhbMF1bMV0gfHwgaSA9PSBtYXhbMV1bMV0pIGNvbnRpbnVlOwoJCQkJCWlmKEJpbkFycmF5W2ldIC8gbmFycm93QXZyZyA+IDEuMiB8fCBCaW5BcnJheVtpXSAvIG5hcnJvd0F2cmcgPCAwLjcpIHJldHVybiBbXTsKCQkJCX0KCQkJfQoJCQlmb3IodmFyIGkgPSAwOyBpIDwgQmluQXJyYXkubGVuZ3RoOyBpKyspIHsKCQkJCWlmKGkgPT0gbWF4WzBdWzFdIHx8IGkgPT0gbWF4WzFdWzFdKSB7CgkJCQkJdGVtcEJpbi5wdXNoKDEpOwoJCQkJCWNvbnRpbnVlOwoJCQkJfQoJCQkJdGVtcEJpbi5wdXNoKDApOwoJCQl9CgkJCXJlc3VsdC5wdXNoKHRlbXBCaW4pOwoJCQljb250aW51ZTsKCQl9CgkJd2hpbGUoY291bnRlcjx0b3RhbEJhcnMpewoJCQlzdW0rPUJpbkFycmF5W2NvdW50ZXJdOwoJCQljb3VudGVyKysKCQl9CgkJaWYodHlwZSA9PT0gMikgewoJCQl2YXIgaW5kZXhDb3VudCA9IFtdOwoJCQlmb3IodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7CgkJCQl2YXIgbWF4ID0gMDsKCQkJCXZhciBwcmV2SW5kZXg7CgkJCQlmb3IodmFyIGogPSAwOyBqIDwgQmluQXJyYXkubGVuZ3RoOyBqKyspIHsKCQkJCQlpZihpbmRleENvdW50LmluZGV4T2YoaikgIT0gLTEpIGNvbnRpbnVlOwoJCQkJCWlmKEJpbkFycmF5W2pdID4gbWF4KSB7CgkJCQkJCXByZXZJbmRleD1qOwoJCQkJCQltYXggPSBCaW5BcnJheVtqXTsKCQkJCQl9CgkJCQl9CgkJCQl3aWRlQXJyLnB1c2gobWF4KTsKCQkJCWluZGV4Q291bnQucHVzaChwcmV2SW5kZXgpOwoJCQl9CgkJCWZvcih2YXIgaiA9IDA7IGogPCBCaW5BcnJheS5sZW5ndGg7IGorKykgewoJCQkJaWYoaW5kZXhDb3VudC5pbmRleE9mKGopID09PSAtMSkgewoJCQkJCW5hcnJvd0Fyci5wdXNoKEJpbkFycmF5W2pdKTsKCQkJCX0KCQkJfQoJCQl2YXIgbWluQXZyZyA9IDA7CgkJCWZvcih2YXIgaiA9IDA7IGogPCBuYXJyb3dBcnIubGVuZ3RoOyBqKyspIHsKCQkJCW1pbkF2cmcgKz0gbmFycm93QXJyW2pdOwoJCQl9CgkJCW1pbkF2cmcvPW5hcnJvd0Fyci5sZW5ndGg7CgkJCXZhciBtYXhBdnJnID0gMDsKCQkJZm9yKHZhciBqID0gMDsgaiA8IHdpZGVBcnIubGVuZ3RoOyBqKyspIHsKCQkJCW1heEF2cmcgKz0gd2lkZUFycltqXTsKCQkJfQoJCQltYXhBdnJnLz13aWRlQXJyLmxlbmd0aDsKCQkJbWF4TGVuZ3RoID0gbWF4QXZyZy9taW5BdnJnOwoJCX0KCQljb3VudGVyPTA7CgkJd2hpbGUoY291bnRlcjx0b3RhbEJhcnMpewoJCQl0ZW1wQmluLnB1c2goKEJpbkFycmF5W2NvdW50ZXJdL3N1bSkqdG90YWwpOwoJCQljb3VudGVyKys7CgkJfQoJCWNvdW50ZXI9MDsKCQl3aGlsZShjb3VudGVyPHRvdGFsQmFycyl7CgkJCWlmKHR5cGUgPT0gMikgewoJCQkJdGVtcEJpbltjb3VudGVyXSA9IE1hdGguYWJzKDEtdGVtcEJpbltjb3VudGVyXSkgPCBNYXRoLmFicyhtYXhMZW5ndGggLSB0ZW1wQmluW2NvdW50ZXJdKSA/IDEgOiAyOwoJCQl9IGVsc2UgewoJCQkJdGVtcEJpbltjb3VudGVyXSA9IHRlbXBCaW5bY291bnRlcl0+bWF4TGVuZ3RoID8gbWF4TGVuZ3RoIDogdGVtcEJpbltjb3VudGVyXTsKCQkJCXRlbXBCaW5bY291bnRlcl0gPSB0ZW1wQmluW2NvdW50ZXJdPDEgPyAxIDogdGVtcEJpbltjb3VudGVyXTsKCQkJCXRlbXBCaW5bY291bnRlcl09TWF0aC5yb3VuZCh0ZW1wQmluW2NvdW50ZXJdKTsKCQkJfQoJCQljb3VudGVyKys7CgkJfQoJCWlmKHR5cGUgPT0gMykgewoJCQl2YXIgY2hlY2tpbmcgPSAwOwoJCQlmb3IodmFyIGkgPSAwOyBpIDwgdGVtcEJpbi5sZW5ndGg7IGkrKykgewoJCQkJY2hlY2tpbmcgKz0gdGVtcEJpbltpXTsKCQkJfQoJCQlpZihjaGVja2luZyA+IDcpIHsKCQkJCXZhciBtYXggPSAwOwoJCQkJdmFyIGhpdEluZGV4ID0gMDsKCQkJCWZvcih2YXIgaSA9IDA7IGkgPCB0ZW1wQmluLmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYodGVtcEJpbltpXT5tYXgpIHsKCQkJCQkJbWF4ID0gdGVtcEJpbltpXTsKCQkJCQkJaGl0SW5kZXggPSBpOwoJCQkJCX0KCQkJCX0KCQkJCXRlbXBCaW5baGl0SW5kZXhdID0gbWF4IC0gKGNoZWNraW5nIC0gNyk7CgkJCX0KCQl9CgkJaWYodHlwZSA9PSAzKSB7CgkJCWZvcih2YXIgaSA9IDA7IGkgPCB0ZW1wQmluLmxlbmd0aDsgaSsrKSB7CgkJCQl0ZXN0RGF0YSArPSBNYXRoLmFicyh0ZW1wQmluW2ldLShCaW5BcnJheVtpXS9zdW0pKnRvdGFsKTsKCQkJfTsKCQl9CgkJcmVzdWx0LnB1c2godGVtcEJpbik7Cgl9CglpZih0eXBlID09IDMpIHsKCQlyZXR1cm4ge2RhdGE6IHJlc3VsdCxjb3JyZWN0aW9uOnRlc3REYXRhfTsKCX0gZWxzZSB7CgkJcmV0dXJuIHJlc3VsdDsKCX0KfQoKZnVuY3Rpb24gQ2hlY2tDb2RlMTI4KHN0cmluZyl7Cgl2YXIgY2hlY2tzdW09c3RyaW5nW3N0cmluZy5sZW5ndGgtMl0uam9pbigiIik7CgljaGVja3N1bSA9IENvZGUxMjhFbmNvZGluZy52YWx1ZS5pbmRleE9mKGNoZWNrc3VtKTsKCXZhciBmYWlsU2FmZSA9IGNoZWNrc3VtICE9IC0xOwoJdmFyIHN1bW1hcml6ZXIgPSBDb2RlMTI4RW5jb2RpbmcudmFsdWUuaW5kZXhPZihzdHJpbmdbMF0uam9pbigiIikpOwoJZmFpbFNhZmUgPSBzdW1tYXJpemVyPT09LTEgPyBmYWxzZSA6IGZhaWxTYWZlOwoJZm9yKHZhciBpPTE7aTwoc3RyaW5nLmxlbmd0aC0yKTtpKyspewoJCXN1bW1hcml6ZXIrPUNvZGUxMjhFbmNvZGluZy52YWx1ZS5pbmRleE9mKHN0cmluZ1tpXS5qb2luKCIiKSkqaQoJCWZhaWxTYWZlID0gQ29kZTEyOEVuY29kaW5nLnZhbHVlLmluZGV4T2Yoc3RyaW5nW2ldLmpvaW4oIiIpKT09PS0xID8gZmFsc2UgOiBmYWlsU2FmZTsKCX0KCXJldHVybiAoc3VtbWFyaXplciUxMDM9PT1jaGVja3N1bSkmJmZhaWxTYWZlOwp9CgpmdW5jdGlvbiBEZWNvZGUyT2Y1KHN0cmluZykgewoJdmFyIHJlc3VsdCA9ICIiOwoJZm9yKHZhciBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykgewoJCWlmKFR3b09mRml2ZUVuY29kaW5nLmluZGV4T2Yoc3RyaW5nW2ldLmpvaW4oIiIpKSA9PSAtMSkgcmV0dXJuIGZhbHNlOwoJCXJlc3VsdCArPSBUd29PZkZpdmVFbmNvZGluZy5pbmRleE9mKHN0cmluZ1tpXS5qb2luKCIiKSk7Cgl9CglyZXR1cm4gcmVzdWx0Owp9CgpmdW5jdGlvbiBEZWNvZGVFQU4xMyhzdHJpbmcpIHsKCWlmKHN0cmluZy5sZW5ndGggIT0gMTIpIHJldHVybiBmYWxzZTsKCXZhciBsZWZ0U2lkZSA9IHN0cmluZy5zbGljZSgwLDYpOwoJdmFyIHRyaWdnZXIgPSBmYWxzZTsKCXZhciByaWdodFNpZGUgPSBzdHJpbmcuc2xpY2UoNixzdHJpbmcubGVuZ3RoKTsKCWZvcih2YXIgaSA9IDA7IGkgPCBsZWZ0U2lkZS5sZW5ndGg7IGkrKykgewoJCXZhciBzdHJpbmcgPSAiIjsKCQlmb3IodmFyIGogPSAwOyBqIDwgbGVmdFNpZGVbaV1bMF07IGorKykgewoJCQlzdHJpbmcgKz0gIjAiOwoJCX0KCQlmb3IodmFyIGogPSAwOyBqIDwgbGVmdFNpZGVbaV1bMV07IGorKykgewoJCQlzdHJpbmcgKz0gIjEiOwoJCX0KCQlmb3IodmFyIGogPSAwOyBqIDwgbGVmdFNpZGVbaV1bMl07IGorKykgewoJCQlzdHJpbmcgKz0gIjAiOwoJCX0KCQlmb3IodmFyIGogPSAwOyBqIDwgbGVmdFNpZGVbaV1bM107IGorKykgewoJCQlzdHJpbmcgKz0gIjEiOwoJCX0KCQlsZWZ0U2lkZVtpXSA9IHN0cmluZzsKCQlpZihsZWZ0U2lkZVtpXS5sZW5ndGggIT0gNyl7CgkJCXRyaWdnZXIgPSB0cnVlOwoJCQlicmVhazsKCQl9Cgl9CglpZih0cmlnZ2VyKSByZXR1cm4gZmFsc2U7Cglmb3IodmFyIGkgPSAwOyBpIDwgcmlnaHRTaWRlLmxlbmd0aDsgaSsrKSB7CgkJdmFyIHN0cmluZyA9ICIiOwoJCWZvcih2YXIgaiA9IDA7IGogPCByaWdodFNpZGVbaV1bMF07IGorKykgewoJCQlzdHJpbmcgKz0gIjEiOwoJCX0KCQlmb3IodmFyIGogPSAwOyBqIDwgcmlnaHRTaWRlW2ldWzFdOyBqKyspIHsKCQkJc3RyaW5nICs9ICIwIjsKCQl9CgkJZm9yKHZhciBqID0gMDsgaiA8IHJpZ2h0U2lkZVtpXVsyXTsgaisrKSB7CgkJCXN0cmluZyArPSAiMSI7CgkJfQoJCWZvcih2YXIgaiA9IDA7IGogPCByaWdodFNpZGVbaV1bM107IGorKykgewoJCQlzdHJpbmcgKz0gIjAiOwoJCX0KCQlyaWdodFNpZGVbaV0gPSBzdHJpbmc7CgkJaWYocmlnaHRTaWRlW2ldLmxlbmd0aCAhPSA3KXsKCQkJdHJpZ2dlciA9IHRydWU7CgkJCWJyZWFrOwoJCX0KCX0KCWlmKHRyaWdnZXIpIHJldHVybiBmYWxzZTsKCXZhciBkZWNvZGVGb3JtYXQgPSBbXTsKCWZvcih2YXIgaSA9IDA7IGkgPCBsZWZ0U2lkZS5sZW5ndGg7IGkrKykgewoJCWlmKHR5cGVvZiBFQU4xM0VuY29kaW5nWyJMIl1bbGVmdFNpZGVbaV1dICE9ICd1bmRlZmluZWQnKSB7CgkJCWRlY29kZUZvcm1hdC5wdXNoKCJMIik7CgkJfSBlbHNlIGlmKHR5cGVvZiBFQU4xM0VuY29kaW5nWyJHIl1bbGVmdFNpZGVbaV1dICE9ICd1bmRlZmluZWQnKSB7CgkJCWRlY29kZUZvcm1hdC5wdXNoKCJHIik7CgkJfWVsc2UgewoJCQl0cmlnZ2VyID0gdHJ1ZTsKCQkJYnJlYWs7CgkJfQoJfQoJaWYodHJpZ2dlcikgcmV0dXJuIGZhbHNlOwoJdmFyIHJlc3VsdEFycmF5ID0gW107CglpZih0eXBlb2YgRUFOMTNFbmNvZGluZy5mb3JtYXRzW2RlY29kZUZvcm1hdC5qb2luKCIiKV0gPT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTsKCXJlc3VsdEFycmF5LnB1c2goRUFOMTNFbmNvZGluZy5mb3JtYXRzW2RlY29kZUZvcm1hdC5qb2luKCIiKV0pOwoJZm9yKHZhciBpID0gMDsgaSA8IGxlZnRTaWRlLmxlbmd0aDsgaSsrKSB7CgkJaWYodHlwZW9mIEVBTjEzRW5jb2RpbmdbZGVjb2RlRm9ybWF0W2ldXVtsZWZ0U2lkZVtpXV0gPT0gJ3VuZGVmaW5lZCcpIHsKCQkJdHJpZ2dlciA9IHRydWU7CgkJCWJyZWFrOwoJCX0KCQlyZXN1bHRBcnJheS5wdXNoKEVBTjEzRW5jb2RpbmdbZGVjb2RlRm9ybWF0W2ldXVtsZWZ0U2lkZVtpXV0pOwoJfQoJaWYodHJpZ2dlcikgcmV0dXJuIGZhbHNlOwoJZm9yKHZhciBpID0gMDsgaSA8IHJpZ2h0U2lkZS5sZW5ndGg7IGkrKykgewoJCWlmKHR5cGVvZiBFQU4xM0VuY29kaW5nWyJSIl1bcmlnaHRTaWRlW2ldXSA9PSAndW5kZWZpbmVkJykgewoJCQl0cmlnZ2VyID0gdHJ1ZTsKCQkJYnJlYWs7CgkJfQoJCXJlc3VsdEFycmF5LnB1c2goRUFOMTNFbmNvZGluZ1siUiJdW3JpZ2h0U2lkZVtpXV0pOwoJfQoJaWYodHJpZ2dlcikgcmV0dXJuIGZhbHNlOwoJdmFyIHdlaWdodCA9IDM7Cgl2YXIgc3VtID0gMDsKCWZvcih2YXIgaSA9IHJlc3VsdEFycmF5Lmxlbmd0aC0yOyBpID49IDA7IGktLSkgewoJCXN1bSArPSByZXN1bHRBcnJheVtpXSp3ZWlnaHQ7CgkJaWYod2VpZ2h0ID09IDMpIHsKCQkJd2VpZ2h0ID0gMTsKCQl9IGVsc2UgewoJCQl3ZWlnaHQgPSAzOwoJCX0KCX0KCXN1bSA9ICgxMCAtIHN1bSUxMCklMTA7CglpZihyZXN1bHRBcnJheVtyZXN1bHRBcnJheS5sZW5ndGgtMV0gPT0gc3VtKSB7CgkJcmV0dXJuIHJlc3VsdEFycmF5LmpvaW4oIiIpOwoJfWVsc2UgewoJCXJldHVybiBmYWxzZTsKCX0KfQpmdW5jdGlvbiBDaGVja0NvZGU5MyhzdHJpbmcpIHsKCXZhciBjaGVja09uZSA9IHN0cmluZ1tzdHJpbmcubGVuZ3RoLTNdLmpvaW4oIiIpOwoJdmFyIGNoZWNrVHdvID0gc3RyaW5nW3N0cmluZy5sZW5ndGgtMl0uam9pbigiIik7Cgl2YXIgZmFpbFNhZmUgPSB0cnVlOwoJaWYodHlwZW9mIENvZGU5M0VuY29kaW5nW2NoZWNrT25lXSA9PSAndW5kZWZpbmVkJykgcmV0dXJuIGZhbHNlOwoJaWYodHlwZW9mIENvZGU5M0VuY29kaW5nW2NoZWNrVHdvXSAgPT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTsKCXZhciBjaGVja1N1bSA9IENvZGU5M0VuY29kaW5nW2NoZWNrT25lXS52YWx1ZTsKCXZhciB3ZWlnaHQgPSAxOwoJdmFyIHN1bSA9IDA7Cglmb3IodmFyIGkgPSBzdHJpbmcubGVuZ3RoLTQ7IGkgPiAwOyBpLS0pIHsKCQlmYWlsU2FmZSA9IHR5cGVvZiBDb2RlOTNFbmNvZGluZ1tzdHJpbmdbaV0uam9pbigiIildID09PSAndW5kZWZpbmVkJyA/IGZhbHNlIDogZmFpbFNhZmU7CgkJaWYoIWZhaWxTYWZlKWJyZWFrOwoJCXN1bSArPSBDb2RlOTNFbmNvZGluZ1tzdHJpbmdbaV0uam9pbigiIildLnZhbHVlKndlaWdodDsKCQl3ZWlnaHQrKzsKCQlpZih3ZWlnaHQgPiAyMCkgd2VpZ2h0ID0gMTsKCX0KCXZhciBmaXJzdENoZWNrID0gc3VtJTQ3OwoJdmFyIGZpcnN0Qm9vbCA9IGZpcnN0Q2hlY2sgPT09IGNoZWNrU3VtOwoJaWYoIWZpcnN0Qm9vbCkgcmV0dXJuIGZhbHNlOwoJaWYoIWZhaWxTYWZlKSByZXR1cm4gZmFsc2U7CglzdW0gPSBmaXJzdENoZWNrOwoJd2VpZ2h0ID0gMjsKCWNoZWNrU3VtID0gQ29kZTkzRW5jb2RpbmdbY2hlY2tUd29dLnZhbHVlOwoJZm9yKHZhciBpID0gc3RyaW5nLmxlbmd0aC00OyBpID4gMDsgaS0tKSB7CgkJZmFpbFNhZmUgPSB0eXBlb2YgQ29kZTkzRW5jb2Rpbmdbc3RyaW5nW2ldLmpvaW4oIiIpXSA9PT0gJ3VuZGVmaW5lZCcgPyBmYWxzZSA6IGZhaWxTYWZlOwoJCWlmKCFmYWlsU2FmZSlicmVhazsKCQlzdW0gKz0gQ29kZTkzRW5jb2Rpbmdbc3RyaW5nW2ldLmpvaW4oIiIpXS52YWx1ZSp3ZWlnaHQ7CgkJd2VpZ2h0Kys7CgkJaWYod2VpZ2h0ID4gMTUpIHdlaWdodCA9IDE7Cgl9Cgl2YXIgc2Vjb25kQ2hlY2sgPSBzdW0lNDc7Cgl2YXIgc2Vjb25kQm9vbCA9IHNlY29uZENoZWNrID09PSBjaGVja1N1bTsKCXJldHVybiBzZWNvbmRCb29sJiZmaXJzdEJvb2w7Cn0KCmZ1bmN0aW9uIENoZWNrQ29kZTM5KHN0cmluZykgewoJdmFyIHRyaWdnZXIgPSB0cnVlOwoJaWYodHlwZW9mIENvZGUzOUVuY29kaW5nW3N0cmluZ1swXS5qb2luKCIiKV0gPT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTsKCWlmKENvZGUzOUVuY29kaW5nW3N0cmluZ1swXS5qb2luKCIiKV0uY2hhcmFjdGVyICE9ICIqIikgcmV0dXJuIGZhbHNlOwoJaWYodHlwZW9mIENvZGUzOUVuY29kaW5nW3N0cmluZ1tzdHJpbmcubGVuZ3RoLTFdLmpvaW4oIiIpXSA9PSAndW5kZWZpbmVkJykgcmV0dXJuIGZhbHNlOwoJaWYoQ29kZTM5RW5jb2Rpbmdbc3RyaW5nW3N0cmluZy5sZW5ndGgtMV0uam9pbigiIildLmNoYXJhY3RlciAhPSAiKiIpIHJldHVybiBmYWxzZTsKCWZvcih2YXIgaSA9IDE7IGkgPCBzdHJpbmcubGVuZ3RoLTE7IGkrKykgewoJCWlmKHR5cGVvZiBDb2RlMzlFbmNvZGluZ1tzdHJpbmdbaV0uam9pbigiIildID09ICd1bmRlZmluZWQnKSB7CgkJCXRyaWdnZXIgPSBmYWxzZTsKCQkJYnJlYWs7CgkJfQoJfQoJcmV0dXJuIHRyaWdnZXI7Cn0KCmZ1bmN0aW9uIERlY29kZUNvZGUzOShzdHJpbmcpIHsKCXZhciByZXN1bHRTdHJpbmcgPSAiIjsKCXZhciBzcGVjaWFsID0gZmFsc2U7Cgl2YXIgY2hhcmFjdGVyID0gIiI7Cgl2YXIgc3BlY2lhbGNoYXIgPSAiIjsKCWZvcih2YXIgaSA9IDE7IGkgPCBzdHJpbmcubGVuZ3RoLTE7aSsrKSB7CgkJY2hhcmFjdGVyID0gQ29kZTM5RW5jb2Rpbmdbc3RyaW5nW2ldLmpvaW4oIiIpXS5jaGFyYWN0ZXI7CgkJaWYoY2hhcmFjdGVyID09ICIkIiB8fCBjaGFyYWN0ZXIgPT0gIi8iIHx8IGNoYXJhY3RlciA9PSAiKyIgfHwgY2hhcmFjdGVyID09ICIlIikgewoJCQlzcGVjaWFsID0gdHJ1ZTsKCQkJc3BlY2lhbGNoYXIgPSBjaGFyYWN0ZXI7CgkJCWNvbnRpbnVlOwoJCX0KCQlpZihzcGVjaWFsKSB7CgkJCWlmKHR5cGVvZiBFeHRlbmRlZEVuY29kaW5nW3NwZWNpYWxjaGFyK2NoYXJhY3Rlcl0gPT0gJ3VuZGVmaW5lZCcpIHsKCQkJCWlmKEV4dGVuZGVkRXhjZXB0aW9ucy5pbmRleE9mKGNoYXJhY3RlcikgIT0gLTEpIHJlc3VsdFN0cmluZyArPSBjaGFyYWN0ZXI7CgkJCX0gZWxzZSB7CgkJCQlyZXN1bHRTdHJpbmcgKz0gRXh0ZW5kZWRFbmNvZGluZ1tzcGVjaWFsY2hhcitjaGFyYWN0ZXJdOwoJCQl9CgkJCXNwZWNpYWwgPSBmYWxzZTsKCQkJY29udGludWU7CgkJfQoJCXJlc3VsdFN0cmluZyArPSBjaGFyYWN0ZXI7Cgl9CglyZXR1cm4gcmVzdWx0U3RyaW5nOwp9CgpmdW5jdGlvbiBEZWNvZGVDb2RlOTMoc3RyaW5nKSB7Cgl2YXIgcmVzdWx0U3RyaW5nPSIiOwoJdmFyIHNwZWNpYWwgPSBmYWxzZTsKCXZhciBjaGFyYWN0ZXIgPSAiIjsKCXZhciBzcGVjaWFsY2hhciA9ICIiOwoJZm9yKHZhciBpID0gMTsgaSA8IHN0cmluZy5sZW5ndGgtMzsgaSsrKSB7CgkJY2hhcmFjdGVyID0gQ29kZTkzRW5jb2Rpbmdbc3RyaW5nW2ldLmpvaW4oIiIpXS5jaGFyYWN0ZXI7CgkJaWYoY2hhcmFjdGVyID09ICIoJCkiIHx8IGNoYXJhY3RlciA9PSAiKC8pIiB8fCBjaGFyYWN0ZXIgPT0gIigrKSIgfHxjaGFyYWN0ZXIgPT0gIiglKSIpIHsKCQkJc3BlY2lhbCA9IHRydWU7CgkJCXNwZWNpYWxjaGFyID0gY2hhcmFjdGVyWzFdOwoJCQljb250aW51ZTsKCQl9CgkJaWYoc3BlY2lhbCkgewoJCQlpZih0eXBlb2YgRXh0ZW5kZWRFbmNvZGluZ1tzcGVjaWFsY2hhcitjaGFyYWN0ZXJdID09ICd1bmRlZmluZWQnKSB7CgkJCQlpZihFeHRlbmRlZEV4Y2VwdGlvbnMuaW5kZXhPZihjaGFyYWN0ZXIpICE9IC0xKSByZXN1bHRTdHJpbmcgKz0gY2hhcmFjdGVyOwoJCQl9IGVsc2UgewoJCQkJcmVzdWx0U3RyaW5nICs9IEV4dGVuZGVkRW5jb2Rpbmdbc3BlY2lhbGNoYXIrY2hhcmFjdGVyXTsKCQkJfQoJCQlzcGVjaWFsID0gZmFsc2U7CgkJCWNvbnRpbnVlOwoJCX0KCQlyZXN1bHRTdHJpbmcgKz0gY2hhcmFjdGVyOwoJfQoJcmV0dXJuIHJlc3VsdFN0cmluZzsKfQoKZnVuY3Rpb24gRGVjb2RlQ29kZTEyOChzdHJpbmcpewoJdmFyIHNldCA9IENvZGUxMjhFbmNvZGluZ1tzdHJpbmdbMF0uam9pbigiIildCgl2YXIgc3ltYm9sOwoJdmFyIENvZGUxMjhGb3JtYXQgPSAiQ29kZTEyOCI7Cgl2YXIgcmVzdWx0U3RyaW5nPSIiOwoJZm9yKHZhciBpPTE7aTwoc3RyaW5nLmxlbmd0aC0yKTtpKyspewoJCXN5bWJvbD1Db2RlMTI4RW5jb2Rpbmdbc3RyaW5nW2ldLmpvaW4oIiIpXVtzZXRdOwoJCXN3aXRjaChzeW1ib2wpewoJCQljYXNlICJGTkMxIjoKCQkJCWlmKGkgPT0gMSkgQ29kZTEyOEZvcm1hdCA9ICJHUzEtMTI4IgoJCQljYXNlICJGTkMyIjoKCQkJY2FzZSAiRk5DMyI6CgkJCWNhc2UgIkZOQzQiOgoJCQkJYnJlYWs7CgkJCWNhc2UgIlNISUZUX0IiOgoJCQkJaSsrOwoJCQkJcmVzdWx0U3RyaW5nKz1Db2RlMTI4RW5jb2Rpbmdbc3RyaW5nW2ldLmpvaW4oIiIpXVsiQiJdCgkJCQlicmVhazsKCQkJY2FzZSAiU0hJRlRfQSI6CgkJCQlpKys7CgkJCQlyZXN1bHRTdHJpbmcrPUNvZGUxMjhFbmNvZGluZ1tzdHJpbmdbaV0uam9pbigiIildWyJBIl0KCQkJCWJyZWFrOwoJCQljYXNlICJDb2RlX0EiOgoJCQkJc2V0PSJBIjsKCQkJCWJyZWFrOwoJCQljYXNlICJDb2RlX0IiOgoJCQkJc2V0PSJCIjsKCQkJCWJyZWFrOwoJCQljYXNlICJDb2RlX0MiOgoJCQkJc2V0PSJDIjsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmVzdWx0U3RyaW5nKz1zeW1ib2w7CgkJfQoJfQoJcmV0dXJuIHtzdHJpbmc6IHJlc3VsdFN0cmluZywgZm9ybWF0OiBDb2RlMTI4Rm9ybWF0fTsKfQpUd29PZkZpdmVFbmNvZGluZyA9IFsiMDAxMTAiLCIxMDAwMSIsIjAxMDAxIiwiMTEwMDAiLCIwMDEwMSIsIjEwMTAwIiwiMDExMDAiLCIwMDAxMSIsIjEwMDEwIiwiMDEwMTAiXTsKQ29kZTEyOEVuY29kaW5nID0gewoJIjIxMjIyMiI6e0EgOiAiICIsIEIgOiAiICIsIEMgOiAiMDAifSwKCSIyMjIxMjIiOntBIDogIiEiLCBCIDogIiEiLCBDIDogIjAxIn0sCgkiMjIyMjIxIjp7QSA6ICciJywgQiA6ICciJywgQyA6ICIwMiJ9LAoJIjEyMTIyMyI6e0EgOiAiIyIsIEIgOiAiIyIsIEMgOiAiMDMifSwKCSIxMjEzMjIiOntBIDogIiQiLCBCIDogIiQiLCBDIDogIjA0In0sCgkiMTMxMjIyIjp7QSA6ICIlIiwgQiA6ICIlIiwgQyA6ICIwNSJ9LAoJIjEyMjIxMyI6e0EgOiAiJiIsIEIgOiAiJiIsIEMgOiAiMDYifSwKCSIxMjIzMTIiOntBIDogIiciLCBCIDogIiciLCBDIDogIjA3In0sCgkiMTMyMjEyIjp7QSA6ICIoIiwgQiA6ICIoIiwgQyA6ICIwOCJ9LAoJIjIyMTIxMyI6e0EgOiAiKSIsIEIgOiAiKSIsIEMgOiAiMDkifSwKCSIyMjEzMTIiOntBIDogIioiLCBCIDogIioiLCBDIDogIjEwIn0sCgkiMjMxMjEyIjp7QSA6ICIrIiwgQiA6ICIrIiwgQyA6ICIxMSJ9LAoJIjExMjIzMiI6e0EgOiAiLCIsIEIgOiAiLCIsIEMgOiAiMTIifSwKCSIxMjIxMzIiOntBIDogIi0iLCBCIDogIi0iLCBDIDogIjEzIn0sCgkiMTIyMjMxIjp7QSA6ICIuIiwgQiA6ICIuIiwgQyA6ICIxNCJ9LAoJIjExMzIyMiI6e0EgOiAiLyIsIEIgOiAiLyIsIEMgOiAiMTUifSwKCSIxMjMxMjIiOntBIDogIjAiLCBCIDogIjAiLCBDIDogIjE2In0sCgkiMTIzMjIxIjp7QSA6ICIxIiwgQiA6ICIxIiwgQyA6ICIxNyJ9LAoJIjIyMzIxMSI6e0EgOiAiMiIsIEIgOiAiMiIsIEMgOiAiMTgifSwKCSIyMjExMzIiOntBIDogIjMiLCBCIDogIjMiLCBDIDogIjE5In0sCgkiMjIxMjMxIjp7QSA6ICI0IiwgQiA6ICI0IiwgQyA6ICIyMCJ9LAoJIjIxMzIxMiI6e0EgOiAiNSIsIEIgOiAiNSIsIEMgOiAiMjEifSwKCSIyMjMxMTIiOntBIDogIjYiLCBCIDogIjYiLCBDIDogIjIyIn0sCgkiMzEyMTMxIjp7QSA6ICI3IiwgQiA6ICI3IiwgQyA6ICIyMyJ9LAoJIjMxMTIyMiI6e0EgOiAiOCIsIEIgOiAiOCIsIEMgOiAiMjQifSwKCSIzMjExMjIiOntBIDogIjkiLCBCIDogIjkiLCBDIDogIjI1In0sCgkiMzIxMjIxIjp7QSA6ICI6IiwgQiA6ICI6IiwgQyA6ICIyNiJ9LAoJIjMxMjIxMiI6e0EgOiAiOyIsIEIgOiAiOyIsIEMgOiAiMjcifSwKCSIzMjIxMTIiOntBIDogIjwiLCBCIDogIjwiLCBDIDogIjI4In0sCgkiMzIyMjExIjp7QSA6ICI9IiwgQiA6ICI9IiwgQyA6ICIyOSJ9LAoJIjIxMjEyMyI6e0EgOiAiPiIsIEIgOiAiPiIsIEMgOiAiMzAifSwKCSIyMTIzMjEiOntBIDogIj8iLCBCIDogIj8iLCBDIDogIjMxIn0sCgkiMjMyMTIxIjp7QSA6ICJAIiwgQiA6ICJAIiwgQyA6ICIzMiJ9LAoJIjExMTMyMyI6e0EgOiAiQSIsIEIgOiAiQSIsIEMgOiAiMzMifSwKCSIxMzExMjMiOntBIDogIkIiLCBCIDogIkIiLCBDIDogIjM0In0sCgkiMTMxMzIxIjp7QSA6ICJDIiwgQiA6ICJDIiwgQyA6ICIzNSJ9LAoJIjExMjMxMyI6e0EgOiAiRCIsIEIgOiAiRCIsIEMgOiAiMzYifSwKCSIxMzIxMTMiOntBIDogIkUiLCBCIDogIkUiLCBDIDogIjM3In0sCgkiMTMyMzExIjp7QSA6ICJGIiwgQiA6ICJGIiwgQyA6ICIzOCJ9LAoJIjIxMTMxMyI6e0EgOiAiRyIsIEIgOiAiRyIsIEMgOiAiMzkifSwKCSIyMzExMTMiOntBIDogIkgiLCBCIDogIkgiLCBDIDogIjQwIn0sCgkiMjMxMzExIjp7QSA6ICJJIiwgQiA6ICJJIiwgQyA6ICI0MSJ9LAoJIjExMjEzMyI6e0EgOiAiSiIsIEIgOiAiSiIsIEMgOiAiNDIifSwKCSIxMTIzMzEiOntBIDogIksiLCBCIDogIksiLCBDIDogIjQzIn0sCgkiMTMyMTMxIjp7QSA6ICJMIiwgQiA6ICJMIiwgQyA6ICI0NCJ9LAoJIjExMzEyMyI6e0EgOiAiTSIsIEIgOiAiTSIsIEMgOiAiNDUifSwKCSIxMTMzMjEiOntBIDogIk4iLCBCIDogIk4iLCBDIDogIjQ2In0sCgkiMTMzMTIxIjp7QSA6ICJPIiwgQiA6ICJPIiwgQyA6ICI0NyJ9LAoJIjMxMzEyMSI6e0EgOiAiUCIsIEIgOiAiUCIsIEMgOiAiNDgifSwKCSIyMTEzMzEiOntBIDogIlEiLCBCIDogIlEiLCBDIDogIjQ5In0sCgkiMjMxMTMxIjp7QSA6ICJSIiwgQiA6ICJSIiwgQyA6ICI1MCJ9LAoJIjIxMzExMyI6e0EgOiAiUyIsIEIgOiAiUyIsIEMgOiAiNTEifSwKCSIyMTMzMTEiOntBIDogIlQiLCBCIDogIlQiLCBDIDogIjUyIn0sCgkiMjEzMTMxIjp7QSA6ICJVIiwgQiA6ICJVIiwgQyA6ICI1MyJ9LAoJIjMxMTEyMyI6e0EgOiAiViIsIEIgOiAiViIsIEMgOiAiNTQifSwKCSIzMTEzMjEiOntBIDogIlciLCBCIDogIlciLCBDIDogIjU1In0sCgkiMzMxMTIxIjp7QSA6ICJYIiwgQiA6ICJYIiwgQyA6ICI1NiJ9LAoJIjMxMjExMyI6e0EgOiAiWSIsIEIgOiAiWSIsIEMgOiAiNTcifSwKCSIzMTIzMTEiOntBIDogIloiLCBCIDogIloiLCBDIDogIjU4In0sCgkiMzMyMTExIjp7QSA6ICJbIiwgQiA6ICJbIiwgQyA6ICI1OSJ9LAoJIjMxNDExMSI6e0EgOiAiXFwiLCBCIDogIlxcIiwgQyA6ICI2MCJ9LAoJIjIyMTQxMSI6e0EgOiAiXSIsIEIgOiAiXSIsIEMgOiAiNjEifSwKCSI0MzExMTEiOntBIDogIl4iLCBCIDogIl4iLCBDIDogIjYyIn0sCgkiMTExMjI0Ijp7QSA6ICJfIiwgQiA6ICJfIiwgQyA6ICI2MyJ9LAoJIjExMTQyMiI6e0EgOiAiTlVMIiwgQiA6ICJgIiwgQyA6ICI2NCJ9LAoJIjEyMTEyNCI6e0EgOiAiU09IIiwgQiA6ICJhIiwgQyA6ICI2NSJ9LAoJIjEyMTQyMSI6e0EgOiAiU1RYIiwgQiA6ICJiIiwgQyA6ICI2NiJ9LAoJIjE0MTEyMiI6e0EgOiAiRVRYIiwgQiA6ICJjIiwgQyA6ICI2NyJ9LAoJIjE0MTIyMSI6e0EgOiAiRU9UIiwgQiA6ICJkIiwgQyA6ICI2OCJ9LAoJIjExMjIxNCI6e0EgOiAiRU5RIiwgQiA6ICJlIiwgQyA6ICI2OSJ9LAoJIjExMjQxMiI6e0EgOiAiQUNLIiwgQiA6ICJmIiwgQyA6ICI3MCJ9LAoJIjEyMjExNCI6e0EgOiAiQkVMIiwgQiA6ICJnIiwgQyA6ICI3MSJ9LAoJIjEyMjQxMSI6e0EgOiAiQlMiLCBCIDogImgiLCBDIDogIjcyIn0sCgkiMTQyMTEyIjp7QSA6ICJIVCIsIEIgOiAiaSIsIEMgOiAiNzMifSwKCSIxNDIyMTEiOntBIDogIkxGIiwgQiA6ICJqIiwgQyA6ICI3NCJ9LAoJIjI0MTIxMSI6e0EgOiAiVlQiLCBCIDogImsiLCBDIDogIjc1In0sCgkiMjIxMTE0Ijp7QSA6ICJGRiIsIEIgOiAibCIsIEMgOiAiNzYifSwKCSI0MTMxMTEiOntBIDogIkNSIiwgQiA6ICJtIiwgQyA6ICI3NyJ9LAoJIjI0MTExMiI6e0EgOiAiU08iLCBCIDogIm4iLCBDIDogIjc4In0sCgkiMTM0MTExIjp7QSA6ICJTSSIsIEIgOiAibyIsIEMgOiAiNzkifSwKCSIxMTEyNDIiOntBIDogIkRMRSIsIEIgOiAicCIsIEMgOiAiODAifSwKCSIxMjExNDIiOntBIDogIkRDMSIsIEIgOiAicSIsIEMgOiAiODEifSwKCSIxMjEyNDEiOntBIDogIkRDMiIsIEIgOiAiciIsIEMgOiAiODIifSwKCSIxMTQyMTIiOntBIDogIkRDMyIsIEIgOiAicyIsIEMgOiAiODMifSwKCSIxMjQxMTIiOntBIDogIkRDNCIsIEIgOiAidCIsIEMgOiAiODQifSwKCSIxMjQyMTEiOntBIDogIk5BSyIsIEIgOiAidSIsIEMgOiAiODUifSwKCSI0MTEyMTIiOntBIDogIlNZTiIsIEIgOiAidiIsIEMgOiAiODYifSwKCSI0MjExMTIiOntBIDogIkVUQiIsIEIgOiAidyIsIEMgOiAiODcifSwKCSI0MjEyMTEiOntBIDogIkNBTiIsIEIgOiAieCIsIEMgOiAiODgifSwKCSIyMTIxNDEiOntBIDogIkVNIiwgQiA6ICJ5IiwgQyA6ICI4OSJ9LAoJIjIxNDEyMSI6e0EgOiAiU1VCIiwgQiA6ICJ6IiwgQyA6ICI5MCJ9LAoJIjQxMjEyMSI6e0EgOiAiRVNDIiwgQiA6ICJ7IiwgQyA6ICI5MSJ9LAoJIjExMTE0MyI6e0EgOiAiRlMiLCBCIDogInwiLCBDIDogIjkyIn0sCgkiMTExMzQxIjp7QSA6ICJHUyIsIEIgOiAifSIsIEMgOiAiOTMifSwKCSIxMzExNDEiOntBIDogIlJTIiwgQiA6ICJ+IiwgQyA6ICI5NCJ9LAoJIjExNDExMyI6e0EgOiAiVVMiLCBCIDogIkRFTCIsIEMgOiAiOTUifSwKCSIxMTQzMTEiOntBIDogIkZOQzMiLCBCIDogIkZOQzMiLCBDIDogIjk2In0sCgkiNDExMTEzIjp7QSA6ICJGTkMyIiwgQiA6ICJGTkMyIiwgQyA6ICI5NyJ9LAoJIjQxMTMxMSI6e0EgOiAiU0hJRlRfQiIsIEIgOiAiU0hJRlRfQSIsIEMgOiAiOTgifSwKCSIxMTMxNDEiOntBIDogIkNvZGVfQyIsIEIgOiAiQ29kZV9DIiwgQyA6ICI5OSJ9LAoJIjExNDEzMSI6e0EgOiAiQ29kZV9CIiwgQiA6ICJGTkM0IiwgQyA6ICJDb2RlX0IifSwKCSIzMTExNDEiOntBIDogIkZOQzQiLCBCIDogIkNvZGVfQSIsIEMgOiAiQ29kZV9BIn0sCgkiNDExMTMxIjp7QSA6ICJGTkMxIiwgQiA6ICJGTkMxIiwgQyA6ICJGTkMxIn0sCgkiMjExNDEyIjogIkEiLAoJIjIxMTIxNCI6ICJCIiwKCSIyMTEyMzIiOiAiQyIsCgkiMjMzMTExIjp7QSA6ICJTVE9QIiwgQiA6ICJTVE9QIiwgQyA6ICJTVE9QIn0sCgl2YWx1ZTogWwoJCSIyMTIyMjIiLAoJCSIyMjIxMjIiLAoJCSIyMjIyMjEiLAoJCSIxMjEyMjMiLAoJCSIxMjEzMjIiLAoJCSIxMzEyMjIiLAoJCSIxMjIyMTMiLAoJCSIxMjIzMTIiLAoJCSIxMzIyMTIiLAoJCSIyMjEyMTMiLAoJCSIyMjEzMTIiLAoJCSIyMzEyMTIiLAoJCSIxMTIyMzIiLAoJCSIxMjIxMzIiLAoJCSIxMjIyMzEiLAoJCSIxMTMyMjIiLAoJCSIxMjMxMjIiLAoJCSIxMjMyMjEiLAoJCSIyMjMyMTEiLAoJCSIyMjExMzIiLAoJCSIyMjEyMzEiLAoJCSIyMTMyMTIiLAoJCSIyMjMxMTIiLAoJCSIzMTIxMzEiLAoJCSIzMTEyMjIiLAoJCSIzMjExMjIiLAoJCSIzMjEyMjEiLAoJCSIzMTIyMTIiLAoJCSIzMjIxMTIiLAoJCSIzMjIyMTEiLAoJCSIyMTIxMjMiLAoJCSIyMTIzMjEiLAoJCSIyMzIxMjEiLAoJCSIxMTEzMjMiLAoJCSIxMzExMjMiLAoJCSIxMzEzMjEiLAoJCSIxMTIzMTMiLAoJCSIxMzIxMTMiLAoJCSIxMzIzMTEiLAoJCSIyMTEzMTMiLAoJCSIyMzExMTMiLAoJCSIyMzEzMTEiLAoJCSIxMTIxMzMiLAoJCSIxMTIzMzEiLAoJCSIxMzIxMzEiLAoJCSIxMTMxMjMiLAoJCSIxMTMzMjEiLAoJCSIxMzMxMjEiLAoJCSIzMTMxMjEiLAoJCSIyMTEzMzEiLAoJCSIyMzExMzEiLAoJCSIyMTMxMTMiLAoJCSIyMTMzMTEiLAoJCSIyMTMxMzEiLAoJCSIzMTExMjMiLAoJCSIzMTEzMjEiLAoJCSIzMzExMjEiLAoJCSIzMTIxMTMiLAoJCSIzMTIzMTEiLAoJCSIzMzIxMTEiLAoJCSIzMTQxMTEiLAoJCSIyMjE0MTEiLAoJCSI0MzExMTEiLAoJCSIxMTEyMjQiLAoJCSIxMTE0MjIiLAoJCSIxMjExMjQiLAoJCSIxMjE0MjEiLAoJCSIxNDExMjIiLAoJCSIxNDEyMjEiLAoJCSIxMTIyMTQiLAoJCSIxMTI0MTIiLAoJCSIxMjIxMTQiLAoJCSIxMjI0MTEiLAoJCSIxNDIxMTIiLAoJCSIxNDIyMTEiLAoJCSIyNDEyMTEiLAoJCSIyMjExMTQiLAoJCSI0MTMxMTEiLAoJCSIyNDExMTIiLAoJCSIxMzQxMTEiLAoJCSIxMTEyNDIiLAoJCSIxMjExNDIiLAoJCSIxMjEyNDEiLAoJCSIxMTQyMTIiLAoJCSIxMjQxMTIiLAoJCSIxMjQyMTEiLAoJCSI0MTEyMTIiLAoJCSI0MjExMTIiLAoJCSI0MjEyMTEiLAoJCSIyMTIxNDEiLAoJCSIyMTQxMjEiLAoJCSI0MTIxMjEiLAoJCSIxMTExNDMiLAoJCSIxMTEzNDEiLAoJCSIxMzExNDEiLAoJCSIxMTQxMTMiLAoJCSIxMTQzMTEiLAoJCSI0MTExMTMiLAoJCSI0MTEzMTEiLAoJCSIxMTMxNDEiLAoJCSIxMTQxMzEiLAoJCSIzMTExNDEiLAoJCSI0MTExMzEiLAoJCSIyMTE0MTIiLAoJCSIyMTEyMTQiLAoJCSIyMTEyMzIiLAoJCSIyMzMxMTEiXQp9CgpDb2RlOTNFbmNvZGluZyA9IHsKIjEzMTExMiI6e3ZhbHVlOjAsY2hhcmFjdGVyOiIwIn0sCiIxMTEyMTMiOnt2YWx1ZToxLGNoYXJhY3RlcjoiMSJ9LAoiMTExMzEyIjp7dmFsdWU6MixjaGFyYWN0ZXI6IjIifSwKIjExMTQxMSI6e3ZhbHVlOjMsY2hhcmFjdGVyOiIzIn0sCiIxMjExMTMiOnt2YWx1ZTo0LGNoYXJhY3RlcjoiNCJ9LAoiMTIxMjEyIjp7dmFsdWU6NSxjaGFyYWN0ZXI6IjUifSwKIjEyMTMxMSI6e3ZhbHVlOjYsY2hhcmFjdGVyOiI2In0sCiIxMTExMTQiOnt2YWx1ZTo3LGNoYXJhY3RlcjoiNyJ9LAoiMTMxMjExIjp7dmFsdWU6OCxjaGFyYWN0ZXI6IjgifSwKIjE0MTExMSI6e3ZhbHVlOjksY2hhcmFjdGVyOiI5In0sCiIyMTExMTMiOnt2YWx1ZToxMCxjaGFyYWN0ZXI6IkEifSwKIjIxMTIxMiI6e3ZhbHVlOjExLGNoYXJhY3RlcjoiQiJ9LAoiMjExMzExIjp7dmFsdWU6MTIsY2hhcmFjdGVyOiJDIn0sCiIyMjExMTIiOnt2YWx1ZToxMyxjaGFyYWN0ZXI6IkQifSwKIjIyMTIxMSI6e3ZhbHVlOjE0LGNoYXJhY3RlcjoiRSJ9LAoiMjMxMTExIjp7dmFsdWU6MTUsY2hhcmFjdGVyOiJGIn0sCiIxMTIxMTMiOnt2YWx1ZToxNixjaGFyYWN0ZXI6IkcifSwKIjExMjIxMiI6e3ZhbHVlOjE3LGNoYXJhY3RlcjoiSCJ9LAoiMTEyMzExIjp7dmFsdWU6MTgsY2hhcmFjdGVyOiJJIn0sCiIxMjIxMTIiOnt2YWx1ZToxOSxjaGFyYWN0ZXI6IkoifSwKIjEzMjExMSI6e3ZhbHVlOjIwLGNoYXJhY3RlcjoiSyJ9LAoiMTExMTIzIjp7dmFsdWU6MjEsY2hhcmFjdGVyOiJMIn0sCiIxMTEyMjIiOnt2YWx1ZToyMixjaGFyYWN0ZXI6Ik0ifSwKIjExMTMyMSI6e3ZhbHVlOjIzLGNoYXJhY3RlcjoiTiJ9LAoiMTIxMTIyIjp7dmFsdWU6MjQsY2hhcmFjdGVyOiJPIn0sCiIxMzExMjEiOnt2YWx1ZToyNSxjaGFyYWN0ZXI6IlAifSwKIjIxMjExMiI6e3ZhbHVlOjI2LGNoYXJhY3RlcjoiUSJ9LAoiMjEyMjExIjp7dmFsdWU6MjcsY2hhcmFjdGVyOiJSIn0sCiIyMTExMjIiOnt2YWx1ZToyOCxjaGFyYWN0ZXI6IlMifSwKIjIxMTIyMSI6e3ZhbHVlOjI5LGNoYXJhY3RlcjoiVCJ9LAoiMjIxMTIxIjp7dmFsdWU6MzAsY2hhcmFjdGVyOiJVIn0sCiIyMjIxMTEiOnt2YWx1ZTozMSxjaGFyYWN0ZXI6IlYifSwKIjExMjEyMiI6e3ZhbHVlOjMyLGNoYXJhY3RlcjoiVyJ9LAoiMTEyMjIxIjp7dmFsdWU6MzMsY2hhcmFjdGVyOiJYIn0sCiIxMjIxMjEiOnt2YWx1ZTozNCxjaGFyYWN0ZXI6IlkifSwKIjEyMzExMSI6e3ZhbHVlOjM1LGNoYXJhY3RlcjoiWiJ9LAoiMTIxMTMxIjp7dmFsdWU6MzYsY2hhcmFjdGVyOiItIn0sCiIzMTExMTIiOnt2YWx1ZTozNyxjaGFyYWN0ZXI6Ii4ifSwKIjMxMTIxMSI6e3ZhbHVlOjM4LGNoYXJhY3RlcjoiICJ9LAoiMzIxMTExIjp7dmFsdWU6MzksY2hhcmFjdGVyOiIkIn0sCiIxMTIxMzEiOnt2YWx1ZTo0MCxjaGFyYWN0ZXI6Ii8ifSwKIjExMzEyMSI6e3ZhbHVlOjQxLGNoYXJhY3RlcjoiKyJ9LAoiMjExMTMxIjp7dmFsdWU6NDIsY2hhcmFjdGVyOiIlIn0sCiIxMjEyMjEiOnt2YWx1ZTo0MyxjaGFyYWN0ZXI6IigkKSJ9LAoiMzEyMTExIjp7dmFsdWU6NDQsY2hhcmFjdGVyOiIoJSkifSwKIjMxMTEyMSI6e3ZhbHVlOjQ1LGNoYXJhY3RlcjoiKC8pIn0sCiIxMjIyMTEiOnt2YWx1ZTo0NixjaGFyYWN0ZXI6IigrKSJ9LAoiMTExMTQxIjp7dmFsdWU6LTEsY2hhcmFjdGVyOiIqIn0KfTsKQ29kZTM5RW5jb2RpbmcgPSB7CiIxMTEyMjEyMTEiOnt2YWx1ZTowLGNoYXJhY3RlcjoiMCJ9LAoiMjExMjExMTEyIjp7dmFsdWU6MSxjaGFyYWN0ZXI6IjEifSwKIjExMjIxMTExMiI6e3ZhbHVlOjIsY2hhcmFjdGVyOiIyIn0sCiIyMTIyMTExMTEiOnt2YWx1ZTozLGNoYXJhY3RlcjoiMyJ9LAoiMTExMjIxMTEyIjp7dmFsdWU6NCxjaGFyYWN0ZXI6IjQifSwKIjIxMTIyMTExMSI6e3ZhbHVlOjUsY2hhcmFjdGVyOiI1In0sCiIxMTIyMjExMTEiOnt2YWx1ZTo2LGNoYXJhY3RlcjoiNiJ9LAoiMTExMjExMjEyIjp7dmFsdWU6NyxjaGFyYWN0ZXI6IjcifSwKIjIxMTIxMTIxMSI6e3ZhbHVlOjgsY2hhcmFjdGVyOiI4In0sCiIxMTIyMTEyMTEiOnt2YWx1ZTo5LGNoYXJhY3RlcjoiOSJ9LAoiMjExMTEyMTEyIjp7dmFsdWU6MTAsY2hhcmFjdGVyOiJBIn0sCiIxMTIxMTIxMTIiOnt2YWx1ZToxMSxjaGFyYWN0ZXI6IkIifSwKIjIxMjExMjExMSI6e3ZhbHVlOjEyLGNoYXJhY3RlcjoiQyJ9LAoiMTExMTIyMTEyIjp7dmFsdWU6MTMsY2hhcmFjdGVyOiJEIn0sCiIyMTExMjIxMTEiOnt2YWx1ZToxNCxjaGFyYWN0ZXI6IkUifSwKIjExMjEyMjExMSI6e3ZhbHVlOjE1LGNoYXJhY3RlcjoiRiJ9LAoiMTExMTEyMjEyIjp7dmFsdWU6MTYsY2hhcmFjdGVyOiJHIn0sCiIyMTExMTIyMTEiOnt2YWx1ZToxNyxjaGFyYWN0ZXI6IkgifSwKIjExMjExMjIxMSI6e3ZhbHVlOjE4LGNoYXJhY3RlcjoiSSJ9LAoiMTExMTIyMjExIjp7dmFsdWU6MTksY2hhcmFjdGVyOiJKIn0sCiIyMTExMTExMjIiOnt2YWx1ZToyMCxjaGFyYWN0ZXI6IksifSwKIjExMjExMTEyMiI6e3ZhbHVlOjIxLGNoYXJhY3RlcjoiTCJ9LAoiMjEyMTExMTIxIjp7dmFsdWU6MjIsY2hhcmFjdGVyOiJNIn0sCiIxMTExMjExMjIiOnt2YWx1ZToyMyxjaGFyYWN0ZXI6Ik4ifSwKIjIxMTEyMTEyMSI6e3ZhbHVlOjI0LGNoYXJhY3RlcjoiTyJ9LAoiMTEyMTIxMTIxIjp7dmFsdWU6MjUsY2hhcmFjdGVyOiJQIn0sCiIxMTExMTEyMjIiOnt2YWx1ZToyNixjaGFyYWN0ZXI6IlEifSwKIjIxMTExMTIyMSI6e3ZhbHVlOjI3LGNoYXJhY3RlcjoiUiJ9LAoiMTEyMTExMjIxIjp7dmFsdWU6MjgsY2hhcmFjdGVyOiJTIn0sCiIxMTExMjEyMjEiOnt2YWx1ZToyOSxjaGFyYWN0ZXI6IlQifSwKIjIyMTExMTExMiI6e3ZhbHVlOjMwLGNoYXJhY3RlcjoiVSJ9LAoiMTIyMTExMTEyIjp7dmFsdWU6MzEsY2hhcmFjdGVyOiJWIn0sCiIyMjIxMTExMTEiOnt2YWx1ZTozMixjaGFyYWN0ZXI6IlcifSwKIjEyMTEyMTExMiI6e3ZhbHVlOjMzLGNoYXJhY3RlcjoiWCJ9LAoiMjIxMTIxMTExIjp7dmFsdWU6MzQsY2hhcmFjdGVyOiJZIn0sCiIxMjIxMjExMTEiOnt2YWx1ZTozNSxjaGFyYWN0ZXI6IloifSwKIjEyMTExMTIxMiI6e3ZhbHVlOjM2LGNoYXJhY3RlcjoiLSJ9LAoiMjIxMTExMjExIjp7dmFsdWU6MzcsY2hhcmFjdGVyOiIuIn0sCiIxMjIxMTEyMTEiOnt2YWx1ZTozOCxjaGFyYWN0ZXI6IiAifSwKIjEyMTIxMjExMSI6e3ZhbHVlOjM5LGNoYXJhY3RlcjoiJCJ9LAoiMTIxMjExMTIxIjp7dmFsdWU6NDAsY2hhcmFjdGVyOiIvIn0sCiIxMjExMTIxMjEiOnt2YWx1ZTo0MSxjaGFyYWN0ZXI6IisifSwKIjExMTIxMjEyMSI6e3ZhbHVlOjQyLGNoYXJhY3RlcjoiJSJ9LAoiMTIxMTIxMjExIjp7dmFsdWU6LTEsY2hhcmFjdGVyOiIqIn0KfTsKCkV4dGVuZGVkRW5jb2RpbmcgPSB7CiIvQSI6ICchJywKIi9CIjogJyInLAoiL0MiOiAnIycsCiIvRCI6ICckJywKIi9FIjogJyUnLAoiL0YiOiAnJicsCiIvRyI6ICInIiwKIi9IIjogJygnLAoiL0kiOiAnKScsCiIvSiI6ICcqJywKIi9LIjogJysnLAoiL0wiOiAnLCcsCiIvTyI6ICcvJywKIi9aIjogJzonLAoiJUYiOiAnOycsCiIlRyI6ICc8JywKIiVIIjogJz0nLAoiJUkiOiAnPicsCiIlSiI6ICc/JywKIiVLIjogJ1snLAoiJUwiOiAiXFwiLAoiJU0iOiAnXScsCiIlTiI6ICdeJywKIiVPIjogJ18nLAoiK0EiOiAnYScsCiIrQiI6ICdiJywKIitDIjogJ2MnLAoiK0QiOiAnZCcsCiIrRSI6ICdlJywKIitGIjogJ2YnLAoiK0ciOiAnZycsCiIrSCI6ICdoJywKIitJIjogJ2knLAoiK0oiOiAnaicsCiIrSyI6ICdrJywKIitMIjogJ2wnLAoiK00iOiAnbScsCiIrTiI6ICduJywKIitPIjogJ28nLAoiK1AiOiAncCcsCiIrUSI6ICdxJywKIitSIjogJ3InLAoiK1MiOiAncycsCiIrVCI6ICd0JywKIitVIjogJ3UnLAoiK1YiOiAndicsCiIrVyI6ICd3JywKIitYIjogJ3gnLAoiK1kiOiAneScsCiIrWiI6ICd6JywKIiVQIjogInsiLAoiJVEiOiAnfCcsCiIlUiI6ICd8JywKIiVTIjogJ34nCn0KCkV4dGVuZGVkRXhjZXB0aW9ucyA9IFsiQSIsIkIiLCJDIiwiRCIsIkUiLCJGIiwiRyIsIkgiLCJJIiwiSiIsIksiLCJMIiwiTSIsIk4iLCJPIiwiUCIsIlEiLCJSIiwiUyIsIlQiLCJVIiwiViIsIlciLCJYIiwiWSIsIloiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiLSIsIi4iXTsKCkVBTjEzRW5jb2RpbmcgPSB7CiJMIjogewoiMDAwMTEwMSI6IDAsCiIwMDExMDAxIjogMSwKIjAwMTAwMTEiOiAyLAoiMDExMTEwMSI6IDMsCiIwMTAwMDExIjogNCwKIjAxMTAwMDEiOiA1LAoiMDEwMTExMSI6IDYsCiIwMTExMDExIjogNywKIjAxMTAxMTEiOiA4LAoiMDAwMTAxMSI6IDkKfSwKIkciOiB7CiIwMTAwMTExIjogMCwKIjAxMTAwMTEiOiAxLAoiMDAxMTAxMSI6IDIsCiIwMTAwMDAxIjogMywKIjAwMTExMDEiOiA0LAoiMDExMTAwMSI6IDUsCiIwMDAwMTAxIjogNiwKIjAwMTAwMDEiOiA3LAoiMDAwMTAwMSI6IDgsCiIwMDEwMTExIjogOQp9LAoiUiI6IHsKIjExMTAwMTAiOiAwLAoiMTEwMDExMCI6IDEsCiIxMTAxMTAwIjogMiwKIjEwMDAwMTAiOiAzLAoiMTAxMTEwMCI6IDQsCiIxMDAxMTEwIjogNSwKIjEwMTAwMDAiOiA2LAoiMTAwMDEwMCI6IDcsCiIxMDAxMDAwIjogOCwKIjExMTAxMDAiOiA5Cn0sCmZvcm1hdHM6IHsKIkxMTExMTCI6IDAsCiJMTEdMR0ciOiAxLAoiTExHR0xHIjogMiwKIkxMR0dHTCI6IDMsCiJMR0xMR0ciOiA0LAoiTEdHTExHIjogNSwKIkxHR0dMTCI6IDYsCiJMR0xHTEciOiA3LAoiTEdMR0dMIjogOCwKIkxHR0xHTCI6IDkKfQp9CgpzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHsKCUltYWdlID0gewoJCWRhdGE6IG5ldyBVaW50OENsYW1wZWRBcnJheShlLmRhdGEuSW1hZ2VEYXRhKSwKCQl3aWR0aDogZS5kYXRhLldpZHRoLAoJCWhlaWdodDogZS5kYXRhLkhlaWdodAoJfQoJRm9ybWF0UHJpb3JpdHkgPSBbIkNvZGUxMjgiLCJDb2RlOTMiLCJDb2RlMzkiLCJFQU4tMTMiLCAiMk9mNSIsICJJbnRlcjJPZjUiXTsKCVNlY3VyZTJPZjUgPSB0cnVlOwoJRWFuMTNTcGVlZCA9IHRydWU7CglMb3dMaWdodCA9IGZhbHNlOwoJaWYodHlwZW9mIGUuZGF0YS5Mb3dMaWdodCAhPSAndW5kZWZpbmVkJykgTG93TGlnaHQgPSBlLmRhdGEuTG93TGlnaHQ7CglpZih0eXBlb2YgZS5kYXRhLkVhbjEzU3BlZWQgIT0gJ3VuZGVmaW5lZCcpIEVhbjEzU3BlZWQgPSBlLmRhdGEuRWFuMTNTcGVlZDsKCWlmKHR5cGVvZiBlLmRhdGEuU2VjdXJlMk9mNSAhPSAndW5kZWZpbmVkJykgU2VjdXJlMk9mNSA9IGUuZGF0YS5TZWN1cmUyT2Y1OwoJRGVjb2RlTnIgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CglpZih0eXBlb2YgZS5kYXRhLkRlY29kZU5yICE9ICd1bmRlZmluZWQnKSB7CgkJRGVjb2RlTnIgPSBlLmRhdGEuRGVjb2RlTnI7Cgl9CglpZih0eXBlb2YgZS5kYXRhLkRlY29kZSAhPSAndW5kZWZpbmVkJykgewoJCUZvcm1hdFByaW9yaXR5ID0gZS5kYXRhLkRlY29kZTsKCX0KCUNyZWF0ZVRhYmxlKCk7Cglzd2l0Y2goZS5kYXRhLmNtZCkgewoJCWNhc2UgImZsaXAiOgoJCQlmbGlwVGFibGUoKTsKCQkJYnJlYWs7CgkJY2FzZSAicmlnaHQiOgoJCQlyb3RhdGVUYWJsZVJpZ2h0KCk7CgkJCWJyZWFrOwoJCWNhc2UgImxlZnQiOgoJCQlyb3RhdGVUYWJsZUxlZnQoKTsKCQkJYnJlYWs7CgkJY2FzZSAibm9ybWFsIjoKCQkJYnJlYWs7CQoJfQoJTWFpbigpOwoJcG9zdE1lc3NhZ2Uoe3Jlc3VsdDogW10sIHN1Y2Nlc3M6IGZhbHNlLCBmaW5pc2hlZDogdHJ1ZX0pOwp9Cg=="),
	m=!1,E={ReadQRCode:!0,ReadBarecode:!0,width:250,height:185,videoSource:{id:!0,maxWidth:640,maxHeight:480},flipVertical:!1,
flipHorizontal:!1,zoom:-1,
beep:"data:text/plain;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksDVgAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uSwP+AAAABLAAAAAAAACWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7ksD/gAAAASwAAAAAAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5LA/4AAAAEsAAAAAAAAJYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAA//uSwP+AAAABLAAAAAAAACWAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAAA==",
brightness:0,autoBrightnessValue:!1,grayScale:!1,contrast:0,threshold:0,sharpness:[],resultFunction:function(b,a){},getUserMediaError:function(){},cameraError:function(b){}};D.prototype={init:function(){a=this;k=a.element.getContext("2d");h=a.options.width;g=a.options.height;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(navigator.getUserMedia)l[a.options.videoSource.id]&&
l[a.options.videoSource.id].active?a.cameraSuccess(l[a.options.videoSource.id]):navigator.getUserMedia({video:{mandatory:{maxWidth:a.options.videoSource.maxWidth,maxHeight:a.options.videoSource.maxHeight},optional:[{sourceId:a.options.videoSource.id}]},audio:!1},a.cameraSuccess,a.cameraError);else return a.options.getUserMediaError(),!1;return!0},cameraSuccess:function(b){l[a.options.videoSource.id]=b;var p=C.URL||C.webkitURL;e.src=p?p.createObjectURL(b):b;e.play()},cameraError:function(b){a.options.cameraError(b);
return!1},setEventListeners:function(){e.addEventListener("canplay",function(b){F||(0<e.videoWidth&&(g=e.videoHeight/(e.videoWidth/h)),t[0].setAttribute("width",h),t[0].setAttribute("height",g),a.options.flipHorizontal&&(k.scale(-1,1),k.translate(-h,0)),a.options.flipVertical&&(k.scale(1,-1),k.translate(0,-g)),F=!0,(a.options.ReadQRCode||a.options.ReadBarecode)&&a.delay())},!1);e.addEventListener("play",function(){setInterval(function(){if(!e.paused&&!e.ended){k.clearRect(0,0,h,g);var b=a.options.zoom;
0>b&&(b=a.optimalZoom());k.drawImage(e,(h*b-h)/-2,(g*b-g)/-2,h*b,g*b);b=k.getImageData(0,0,h,g);a.options.grayScale&&(b=a.grayScale(b));if(0!=a.options.brightness||0!=a.options.autoBrightnessValue)b=a.brightness(b,a.options.brightness);0!=a.options.contrast&&(b=a.contrast(b,a.options.contrast));0!=a.options.threshold&&(b=a.threshold(b,a.options.threshold));0!=a.options.sharpness.length&&(b=a.convolute(b,a.options.sharpness));k.putImageData(b,0,0)}},40)},!1)},setCallback:function(){G.onmessage=function(b){m||
e.paused||(b.data.success&&1<b.data.result[0].length&&-1==b.data.result[0].indexOf("undefined")?(a.beep(),m=!0,a.delay(),a.options.resultFunction(b.data.result[0],u)):b.data.finished&&(v=!v,setTimeout(function(){a.tryParseBarecode()},320)))};qrcode.callback=function(b){m||e.paused||(a.beep(),m=!0,a.delay(),a.options.resultFunction(b,u))}},tryParseBarecode:function(){var b=1==v?"flip":"normal";u=t[0].toDataURL();var a=k.getImageData(0,0,h,g).data;G.postMessage({ImageData:a,Width:h,Height:g,cmd:b,DecodeNr:1,
LowLight:!1})},tryParseQRCode:function(){try{u=t[0].toDataURL(),qrcode.decode()}catch(b){m||setTimeout(function(){a.tryParseQRCode()},320)}},delay:function(){a.cameraPlay(!0)},cameraStop:function(){m=!0;e.pause()},cameraStopAll:function(){k.clearRect(0,0,h,g);m=!0;e.pause();for(var b in l)l[b]&&(l[b].stop(),l[b]=null)},cameraPlay:function(b){l[a.options.videoSource.id]?b||a.cameraSuccess(l[a.options.videoSource.id]):a.init();m=!0;e.play();setTimeout(function(){m=!1;a.options.ReadBarecode&&a.tryParseBarecode();
a.options.ReadQRCode&&a.tryParseQRCode()},2E3)},getLastImageSrc:function(){return u},optimalZoom:function(b){return e.videoHeight/g},getImageLightness:function(){for(var b=k.getImageData(0,0,h,g).data,a=0,d,c,f,e=0,l=b.length;e<l;e+=4)d=b[e],c=b[e+1],f=b[e+2],d=Math.floor((d+c+f)/3),a+=d;return Math.floor(a/(h*g))},brightness:function(b,p){p=0==p&&0!=a.options.autoBrightnessValue?a.options.autoBrightnessValue-a.getImageLightness():p;for(var d=b.data,c=0;c<d.length;c+=4)d[c]+=p,d[c+1]+=p,d[c+2]+=p;
return b},grayScale:function(b){for(var a=b.data,d=0;d<a.length;d+=4)a[d]=a[d+1]=a[d+2]=.2126*a[d]+.7152*a[d+1]+.0722*a[d+2];return b},contrast:function(b,a){for(var d=b.data,c=0;c<d.length;c+=4){a=10;var f=Math.round((d[c]+d[c+1]+d[c+2])/3);127<f?(d[c]+=d[c]/f*a,d[c+1]+=d[c+1]/f*a,d[c+2]+=d[c+2]/f*a):(d[c]-=d[c]/f*a,d[c+1]-=d[c+1]/f*a,d[c+2]-=d[c+2]/f*a)}return b},threshold:function(a,e){for(var d,c=a.data,f=0,k=h*g*4;f<k;f+=4)d=c[f]+c[f+1]+c[f+2],c[f]=d<e?c[f+1]=c[f+2]=0:c[f+1]=c[f+2]=255,c[f+3]=
255;return a},convolute:function(a,e,d){var c=a.width,f=a.height,g=Math.round(Math.sqrt(e.length)),h=Math.floor(g/2);a=a.data;var k=H.createElement("canvas").getContext("2d").createImageData(c,f),l=k.data;d=d?1:0;for(var m=0;m<f;m++)for(var n=0;n<c;n++){for(var t=m,u=n,v=0,A=0,B=0,w=0,x=4*(m*c+n),y=0;y<g;y++)for(var z=0;z<g;z++){var q=t+y-h,r=u+z-h;0<=q&&q<f&&0<=r&&r<c&&(q=4*(q*c+r),r=e[y*g+z],v+=a[q]*r,A+=a[q+1]*r,B+=a[q+2]*r,w+=a[q+3]*r)}l[x]=v;l[x+1]=A;l[x+2]=B;l[x+3]=w+d*(255-w)}return k},beep:function(){if("string"==
typeof a.options.beep){var b=a.options.beep;setTimeout(function(){(new Audio(b)).play()},0)}}};n.fn.WebCodeCam=function(a){return this.each(function(){n.data(this,"plugin_WebCodeCam")||n.data(this,"plugin_WebCodeCam",new D(this,a))})}})(jQuery,window,document);